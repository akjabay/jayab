import{M as S}from"./MainTitleComp.ccf00b88.js";import{C as w,_ as $,G as b,K as q,L as n,ao as k,M as x,c as D,j as Q,h as N,a8 as j,r as v,E as F,D as H,F as h,J as o,I as C,R as A,ar as I,O as M,Q as O}from"./index.9f5cea10.js";import{Q as m}from"./QInput.f55b9ace.js";import{Q as Y,D as z}from"./DarkComp.621328b0.js";import{b as P}from"./request.cab34313.js";import{a as E}from"./index.2115cb6d.js";import"./use-form.4fbf8fd2.js";import"./use-transition.ffbc195c.js";import"./axios.37489ddf.js";const G=w({name:"SubTitleComp",props:{title:String}}),J={class:"row q-py-md"},K=n("div",{class:x("sub-line90 sub-line1-position")},null,-1),R={class:x("ad-blog-sub-title q-ml-lg")};function W(e,s,U,d,u,c){return b(),q("div",J,[K,n("div",R,k(e.title),1)])}var T=$(G,[["render",W]]),X=D({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:s,emit:U}){let d=!1,u,c,a=null,t=null,l,g;function y(){u&&u(),u=null,d=!1,a!==null&&(clearTimeout(a),a=null),t!==null&&(clearTimeout(t),t=null),c!==void 0&&c.removeEventListener("transitionend",l),l=null}function V(i,r,p){r!==void 0&&(i.style.height=`${r}px`),i.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,d=!0,u=p}function _(i,r){i.style.overflowY=null,i.style.height=null,i.style.transition=null,y(),r!==g&&U(r)}function L(i,r){let p=0;c=i,d===!0?(y(),p=i.offsetHeight===i.scrollHeight?0:void 0):(g="hide",i.style.overflowY="hidden"),V(i,p,r),a=setTimeout(()=>{a=null,i.style.height=`${i.scrollHeight}px`,l=f=>{t=null,(Object(f)!==f||f.target===i)&&_(i,"show")},i.addEventListener("transitionend",l),t=setTimeout(l,e.duration*1.1)},100)}function B(i,r){let p;c=i,d===!0?y():(g="show",i.style.overflowY="hidden",p=i.scrollHeight),V(i,p,r),a=setTimeout(()=>{a=null,i.style.height=0,l=f=>{t=null,(Object(f)!==f||f.target===i)&&_(i,"hide")},i.addEventListener("transitionend",l),t=setTimeout(l,e.duration*1.1)},100)}return Q(()=>{d===!0&&y()}),()=>N(j,{css:!1,appear:e.appear,onEnter:L,onLeave:B},s.default)}});const Z=w({name:"UserEditComp",components:{SubTitleComp:T},setup(){return{editingUser:v({name:"",username:"",address:"",commissionPercentage:"",commissionLimit:"",commissionExpire:"",password:"",confirmPassword:""}),rules:v({}),editPassBox:v(!1),loading:v(!1)}},computed:{...F(P,["user"])},methods:{...H(P,["setUser","setToken"]),async onEdit(){this.loading=!0;try{if(this.editingUser.password&&this.editingUser.password!=this.editingUser.confirmPassword)return this.$q.notify({type:"negative",message:"failed",caption:"failed"});const e=await E.user.userUpdate({name:this.editingUser.name,username:this.editingUser.username,address:this.editingUser.address,commissionPercentage:this.editingUser.commissionPercentage,commissionLimit:this.editingUser.commissionLimit,commissionExpire:this.editingUser.commissionExpire,password:this.editingUser.password});e.data.errors?this.$q.notify({type:"negative",message:"failed",caption:"failed"}):e.data.data.userUpdate.id?(this.editingUser=e.data.data.userUpdate,this.$q.notify({type:"positive",message:"success",caption:"success"})):this.$q.notify({type:"negative",message:"failed",caption:"failed"})}catch(e){console.log(e,"error on fecth data"),this.loading=!1,this.$q.notify({type:"negative",message:"failed",caption:"failed"})}this.loading=!1},async fetchData(){try{const e=this.$route.params.userId,s=await E.user.userFind({id:e||this.user.id});s.data.errors?this.$q.notify({type:"warning",message:"failed",caption:s.data.errors[0]}):s.data.data.userFind&&(this.editingUser=s.data.data.userFind)}catch(e){const s=new Error(e);console.log(s),this.$q.notify({type:"negative",message:"failed",caption:"failed"})}}},mounted(){this.rules={required:e=>!!e||"required",min3:e=>!e||e.length>=3||"min3Character",min8:e=>!e||e.length>=8||"min8Character",email:(e,s)=>s.email(e)||"havetoBeValidEmail"},this.fetchData()}}),ee={class:"row justify-center text-center q-mt-xl"},se={class:"col-12 col-md-10 col-sm-10 text-center"},te={class:"row q-py-sm q-mx-sm"},ie={class:"col-12 col-md-6 col-sm-6 col-xs-10 q-px-md text-center"},oe={class:"col-12 col-md-6 col-sm-6 col-xs-10 q-px-md text-center"},ne={class:"col-12 col-md-6 col-sm-6 col-xs-10 q-px-md text-center"},ae={class:"row justify-center text-center q-my-md"},le={class:"col-12 col-md-6 col-sm-6 col-xs-10 q-px-md text-center"},re={class:"row justify-center"},de={class:"col-12 col-md-8 col-sm-8 col-xs-8 q-px-md q-mx-md text-center"},me={class:"full-width text-right"};function ue(e,s,U,d,u,c){const a=h("sub-title-comp");return b(),q("div",ee,[n("div",se,[n("div",te,[n("div",ie,[o(m,{outlined:"",dense:"",class:"q-mt-sm",modelValue:e.editingUser.name,"onUpdate:modelValue":s[0]||(s[0]=t=>e.editingUser.name=t),rules:[e.rules.min3],label:"inputName"},null,8,["modelValue","rules"])]),n("div",oe,[o(m,{outlined:"",dense:"",class:"q-mt-sm",modelValue:e.editingUser.username,"onUpdate:modelValue":s[1]||(s[1]=t=>e.editingUser.username=t),rules:[e.rules.min3],label:"inputUsername"},null,8,["modelValue","rules"])]),n("div",ne,[o(m,{outlined:"",dense:"",class:"q-mt-sm",modelValue:e.editingUser.address,"onUpdate:modelValue":s[2]||(s[2]=t=>e.editingUser.address=t),rules:[e.rules.min8],label:"Address"},null,8,["modelValue","rules"])])]),o(a,{title:"commissions"}),n("div",ae,[n("div",le,[o(m,{outlined:"",dense:"",type:"Number",class:"q-mt-sm",modelValue:e.editingUser.commissionPercentage,"onUpdate:modelValue":s[3]||(s[3]=t=>e.editingUser.commissionPercentage=t),rules:[],label:"Commission Percentage"},null,8,["modelValue"]),o(m,{outlined:"",dense:"",type:"Number",class:"q-mt-sm",modelValue:e.editingUser.commissionLimit,"onUpdate:modelValue":s[4]||(s[4]=t=>e.editingUser.commissionLimit=t),rules:[],label:"Commission Limit"},null,8,["modelValue"]),o(m,{outlined:"",dense:"",type:"Date",class:"q-mt-sm",modelValue:e.editingUser.commissionExpire,"onUpdate:modelValue":s[5]||(s[5]=t=>e.editingUser.commissionExpire=t),rules:[],label:"Commission Limit"},null,8,["modelValue"])])]),o(Y,{"no-caps":"",depressed:"",unelevated:"",onClick:s[6]||(s[6]=t=>e.editPassBox=!e.editPassBox),color:"primary",label:"changePassword"}),n("div",re,[o(X,null,{default:C(()=>[A(n("div",de,[o(m,{outlined:"",dense:"",class:"q-mt-sm",modelValue:e.editingUser.password,"onUpdate:modelValue":s[7]||(s[7]=t=>e.editingUser.password=t),rules:[e.rules.min8],type:"password",label:"inputPassword"},null,8,["modelValue","rules"]),o(m,{outlined:"",dense:"",class:"q-mt-sm",modelValue:e.editingUser.confirmPassword,"onUpdate:modelValue":s[8]||(s[8]=t=>e.editingUser.confirmPassword=t),rules:[e.rules.min8],type:"password",label:"inputConfirmPassword"},null,8,["modelValue","rules"])],512),[[I,e.editPassBox]])]),_:1})]),n("div",me,[o(O,{loading:e.loading,onClick:e.onEdit,class:"q-mt-sm q-mx-sm ad-primary-btn"},{default:C(()=>[M(" submit ")]),_:1},8,["loading","onClick"])])])])}var ce=$(Z,[["render",ue]]);const pe=w({name:"ProfileSettingPage",components:{MainTitleComp:S,SubTitleComp:T,UserEditComp:ce,DarkComp:z},setup(){return{}},methods:{},mounted(){}}),fe={class:""};function ge(e,s,U,d,u,c){const a=h("main-title-comp"),t=h("sub-title-comp"),l=h("dark-comp"),g=h("user-edit-comp");return b(),q("div",fe,[o(a,{title:"editUser"}),o(t,{title:"settings"}),o(l),o(t,{title:"edit"}),o(g)])}var _e=$(pe,[["render",ge]]);export{_e as default};
