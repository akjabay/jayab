import{Q as r}from"./QInput.f55b9ace.js";import{c as I,a as D,h as V,d as B,ap as O,aq as P,C as L,_ as H,r as a,D as F,G as v,K as M,L as d,J as i,I as l,Q as m,H as R,N as C,F as b,O as h,ao as w}from"./index.9f5cea10.js";import{a as S}from"./index.2115cb6d.js";import{Q as q}from"./QCard.c4dcc096.js";import{b as z}from"./request.cab34313.js";import{M as G}from"./MainTitleComp.ccf00b88.js";import"./use-form.4fbf8fd2.js";import"./axios.37489ddf.js";var Y=I({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const o=D(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>V(e.tag,{class:o.value},B(t.default))}}),_=I({name:"QCardActions",props:{...O,vertical:Boolean},setup(e,{slots:t}){const o=P(e),n=D(()=>`q-card__actions ${o.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>V("div",{class:n.value},B(t.default))}});/*! vue-countdown v2.1.0 | (c) 2018-present Chen Fengyuan | MIT */const c=1e3,f=60*c,p=60*f,E=24*p,$="abort",k="end",N="progress",T="start",A="visibilitychange";var j=L({name:"VueCountdown",props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:e=>e>=0},now:{type:Function,default:()=>Date.now()},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:e=>e>=0},transform:{type:Function,default:e=>e}},emits:[$,k,N,T],data(){return{counting:!1,endTime:0,totalMilliseconds:0,requestId:0}},computed:{days(){return Math.floor(this.totalMilliseconds/E)},hours(){return Math.floor(this.totalMilliseconds%E/p)},minutes(){return Math.floor(this.totalMilliseconds%p/f)},seconds(){return Math.floor(this.totalMilliseconds%f/c)},milliseconds(){return Math.floor(this.totalMilliseconds%c)},totalDays(){return this.days},totalHours(){return Math.floor(this.totalMilliseconds/p)},totalMinutes(){return Math.floor(this.totalMilliseconds/f)},totalSeconds(){return Math.floor(this.totalMilliseconds/c)}},watch:{$props:{deep:!0,immediate:!0,handler(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},mounted(){document.addEventListener(A,this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener(A,this.handleVisibilityChange),this.pause()},methods:{start(){this.counting||(this.counting=!0,this.emitEvents&&this.$emit(T),document.visibilityState==="visible"&&this.continue())},continue(){if(!this.counting)return;const e=Math.min(this.totalMilliseconds,this.interval);if(e>0){let t,o;const n=u=>{t||(t=u),o||(o=u);const g=u-t;g>=e||g+(u-o)/2>=e?this.progress():this.requestId=requestAnimationFrame(n),o=u};this.requestId=requestAnimationFrame(n)}else this.end()},pause(){cancelAnimationFrame(this.requestId)},progress(){!this.counting||(this.totalMilliseconds-=this.interval,this.emitEvents&&this.totalMilliseconds>0&&this.$emit(N,{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort(){!this.counting||(this.pause(),this.counting=!1,this.emitEvents&&this.$emit($))},end(){!this.counting||(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit(k))},update(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},restart(){this.pause(),this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.counting=!1,this.start()},handleVisibilityChange(){switch(document.visibilityState){case"visible":this.update(),this.continue();break;case"hidden":this.pause();break}}},render(){return V(this.tag,this.$slots.default?[this.$slots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:void 0)}});const J=L({name:"SignupPage",components:{MainTitleComp:G,VueCountdown:j},setup(){return{name:a(""),email:a(""),phone:a(""),address:a(""),password:a(""),confirmPassword:a(""),code:a(""),countDownTime:a(5*60*1e3),rules:a({}),form1:a(!0),form2:a(!1),user:a({}),disable:a(!1),loading:a(!1)}},methods:{...F(z,["setUser","setToken"]),async register(){this.loading=!0;try{if(this.password!=this.confirmPassword)return this.$q.notify({type:"negative",message:"failed",caption:"passwordsAreNotMatch"});const e=await S.auth.authSignup({name:this.name,email:this.email,phone:this.phone,address:this.address,password:this.password});e.data.errors?this.$q.notify({type:"negative",message:"failed",caption:"failed"}):e.data.data.authSignup.id?(this.user=e.data.data.authSignup,this.form1=!1,this.form2=!1,this.form2=!0,this.$q.notify({type:"positive",message:"success",caption:"successRegister"})):this.$q.notify({type:"negative",message:"failed",caption:"failed"})}catch(e){this.loading=!1,console.log(e,"error on fecth data"),this.$q.notify({type:"negative",message:"failed",caption:"failed"})}this.loading=!1},async codeVerify(){this.loading=!0;try{const e=await S.auth.authVerify({email:this.email,password:this.password,code:this.code});if(e.data.errors)this.$q.notify({type:"negative",message:"failed",caption:"failed"});else if(e.data.data.authVerify.token){const t=e.data.data.authVerify.user;this.setUser(t),this.setToken(e.data.data.authVerify.token),this.$router.push({path:"/"})}else this.$q.notify({type:"negative",message:"failed",caption:"failed"})}catch(e){console.log(e,"error on fecth data"),this.loading=!1,this.$q.notify({type:"negative",message:"failed",caption:"failed"})}this.loading=!1},filterFn(e,t){t(()=>{if(e==="")this.filterOptions=options;else{const o=e.toLowerCase();this.filterOptions=options.filter(n=>n.name.toLowerCase().indexOf(o)>-1)}})}},mounted(){this.rules={required:e=>!!e||"required",min3:e=>e.length>=3||"min3Character",min8:e=>e.length>=8||"min8Character",is10:e=>e.length==10||"is10Character",email:(e,t)=>t.email(e)||"havetoBeValidEmail"}}}),K={class:"row justify-center text-center q-mt-xl"},W={class:"col-12 col-md-4 col-sm-6 text-center"},X={key:0,class:"q-py-sm q-mx-sm"},Z={class:"col-12 text-center"},x={class:"col-12 text-center"},ee=d("div",{class:"text-h5 text-center ad-font-color q-pa-sm q-mb-sm"}," verify Account ",-1),te={class:"text-h5 ad-font-color"},se=d("span",null,"did not Recieve Code",-1),ie=d("span",null,"have An Account ? ",-1);function ae(e,t,o,n,u,g){const Q=b("main-title-comp"),U=b("vue-countdown");return v(),M("div",K,[d("div",W,[i(Q,{title:"signup"}),e.form1?(v(),M("div",X,[d("div",Z,[i(r,{outlined:"",class:"q-mt-sm",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=s=>e.name=s),rules:[e.rules.required,e.rules.min3],label:"inputName"},null,8,["modelValue","rules"]),i(r,{outlined:"",class:"q-mt-sm",modelValue:e.email,"onUpdate:modelValue":t[1]||(t[1]=s=>e.email=s),rules:[e.rules.required,e.rules.min3,e.rules.email],label:"inputEmail"},null,8,["modelValue","rules"]),i(r,{outlined:"",class:"col-8",type:"tel",maxlength:"10",modelValue:e.phone,"onUpdate:modelValue":t[2]||(t[2]=s=>e.phone=s),rules:[e.rules.required,e.rules.is10],label:"inputPhone"},null,8,["modelValue","rules"]),i(r,{outlined:"",class:"q-mt-sm",modelValue:e.address,"onUpdate:modelValue":t[3]||(t[3]=s=>e.address=s),rules:[e.rules.required,e.rules.min8],label:"inputAddress"},null,8,["modelValue","rules"]),i(r,{outlined:"",class:"q-mt-sm",modelValue:e.password,"onUpdate:modelValue":t[4]||(t[4]=s=>e.password=s),rules:[e.rules.required,e.rules.min8],type:"password",label:"inputPassword"},null,8,["modelValue","rules"]),i(r,{outlined:"",class:"q-mt-sm",modelValue:e.confirmPassword,"onUpdate:modelValue":t[5]||(t[5]=s=>e.confirmPassword=s),rules:[e.rules.required,e.rules.min8],type:"password",label:"inputConfirmPassword"},null,8,["modelValue","rules"]),i(m,{loading:e.loading,onClick:e.register,class:"full-width q-mt-sm ad-primary-btn"},{default:l(()=>[h(" signup ")]),_:1},8,["loading","onClick"])])])):e.form2?(v(),R(q,{key:1,bordered:"",class:"q-pa-sm q-mx-sm",flat:""},{default:l(()=>[d("div",x,[ee,i(Y,{style:{direction:"ltr"}},{default:l(()=>[i(U,{time:e.countDownTime},{default:l(({minutes:s,seconds:y})=>[d("span",te,w(`${s}`.length==2?s:"0"+s)+": "+w(`${y}`.length==2?y:"0"+y),1)]),_:1},8,["time"])]),_:1}),i(r,{outlined:"",class:"q-mt-sm",modelValue:e.code,"onUpdate:modelValue":t[6]||(t[6]=s=>e.code=s),rules:[e.rules.required],label:"inputVerificationCode"},null,8,["modelValue","rules"]),i(m,{onClick:e.codeVerify,class:"full-width q-mt-sm ad-primary-btn"},{default:l(()=>[h(" submit ")]),_:1},8,["onClick"])]),i(_,null,{default:l(()=>[C("",!0),i(m,{onClick:t[7]||(t[7]=s=>(e.form2=!1,e.form1=!0)),dense:"",flat:"",color:"primary"},{default:l(()=>[h(" back ")]),_:1})]),_:1}),i(q,{bordered:"",class:"q-pa-sm q-ma-sm",flat:""},{default:l(()=>[se,i(m,{"no-caps":"",dense:"",flat:"",disable:e.disable,loading:e.loading,class:"q-mx-xs",color:"primary",onClick:t[8]||(t[8]=s=>(e.register,e.disable=!0))},{default:l(()=>[h("try Again")]),_:1},8,["disable","loading"])]),_:1})]),_:1})):C("",!0),i(q,{bordered:"",class:"q-pa-sm q-ma-sm",flat:""},{default:l(()=>[ie,i(m,{"no-caps":"",dense:"",flat:"",class:"q-mx-xs",color:"primary",onClick:t[9]||(t[9]=s=>e.$router.push("/accounts/login"))},{default:l(()=>[h("login")]),_:1})]),_:1})])])}var fe=H(J,[["render",ae]]);export{fe as default};
