import{Q as r}from"./QInput.f55b9ace.js";import{_ as h,C as g,r as i,D as y,G as m,K as f,L as l,J as a,I as o,Q as n,H as q,N as w,F as v,O as d}from"./index.9f5cea10.js";import{Q as u}from"./QCard.c4dcc096.js";import{b as V}from"./request.cab34313.js";import{a as p}from"./index.2115cb6d.js";import{M as b}from"./MainTitleComp.ccf00b88.js";import"./use-form.4fbf8fd2.js";import"./axios.37489ddf.js";const C=g({name:"PassResetPage",components:{MainTitleComp:b},setup(){return{email:i(""),password:i(""),confirmPassword:i(""),code:i(""),rules:i({}),form1:i(!0),form2:i(!1),loading:i(!1),disable:i(!1)}},methods:{...y(V,["setUser","setToken"]),async onSubmit(){this.loading=!0;try{if(!this.email||!/\S+@\S+\.\S+/.test(this.email))return this.loading=!1,this.$q.notify({type:"warning",message:"failed",caption:"fillRequiredFields"});const e=await p.auth.authResetPassword({email:this.email});e.data.errors?this.$q.notify({type:"negative",message:"failed",caption:"failed"}):e.data.data.authResetPassword.id?(this.user=e.data.data.authResetPassword,this.form1=!1,this.form2=!0,this.$q.notify({type:"positive",message:"success",caption:"successRegister"})):this.$q.notify({type:"negative",message:"failed",caption:"failed"})}catch(e){this.loading=!1,console.log(e,"error on fecth data"),this.$q.notify({type:"negative",message:"failed",caption:"failed"})}this.loading=!1},async codeVerify(){this.loading=!0;try{if(this.password!=this.confirmPassword)return this.$q.notify({type:"negative",message:"failed",caption:"passwordsAreNotMatch"});const e=await p.auth.authResetPasswordVerify({email:this.email,password:this.password,code:this.code});e.data.errors?this.$q.notify({type:"negative",message:"failed",caption:"failed"}):e.data.data.authResetPasswordVerify.id?(this.$q.notify({type:"positive",message:"success",caption:"successResetPassword"}),this.$router.push({path:"/accounts/login"})):this.$q.notify({type:"negative",message:"failed",caption:"failed"})}catch(e){console.log(e,"error on fecth data"),this.loading=!1,this.$q.notify({type:"negative",message:"failed",caption:"failed"})}this.loading=!1}},mounted(){this.rules={required:e=>!!e||"required",min3:e=>e.length>=3||"min3Character",min8:e=>e.length>=8||"min8Character",email:(e,s)=>s.email(e)||"havetoBeValidEmail"}}}),$={class:"row justify-center text-center q-mt-xl"},P={class:"col-12 col-md-4 col-sm-6 text-center"},R={key:0,class:"q-py-sm q-mx-sm"},k={class:"col-12 text-center"},A={class:"col-12 text-center"},S=l("div",{class:"text-h5 text-center q-pa-sm q-mb-sm"}," verify Code And Reset ",-1),B=l("span",null,"did not Recieve Code",-1),N=l("span",null,"dont Have An Account",-1);function Q(e,s,U,E,M,T){const c=v("main-title-comp");return m(),f("div",$,[l("div",P,[a(c,{title:"passwordReset"}),e.form1?(m(),f("div",R,[l("div",k,[a(r,{required:"",outlined:"",class:"q-mt-sm",modelValue:e.email,"onUpdate:modelValue":s[0]||(s[0]=t=>e.email=t),rules:[e.rules.required,e.rules.email],label:"inputEmail"},null,8,["modelValue","rules"]),a(n,{loading:e.loading,onClick:e.onSubmit,class:"full-width q-mt-sm ad-primary-btn"},{default:o(()=>[d(" submit ")]),_:1},8,["loading","onClick"])])])):e.form2?(m(),q(u,{key:1,bordered:"",class:"q-pa-sm q-mx-sm",flat:""},{default:o(()=>[l("div",A,[S,a(r,{outlined:"",class:"q-mt-sm",modelValue:e.code,"onUpdate:modelValue":s[1]||(s[1]=t=>e.code=t),rules:[e.rules.required],label:"inputVerificationCode"},null,8,["modelValue","rules"]),a(r,{outlined:"",class:"q-mt-sm",modelValue:e.password,"onUpdate:modelValue":s[2]||(s[2]=t=>e.password=t),rules:[e.rules.required,e.rules.min8],type:"password",label:"inputPassword"},null,8,["modelValue","rules"]),a(r,{outlined:"",class:"q-mt-sm",modelValue:e.confirmPassword,"onUpdate:modelValue":s[3]||(s[3]=t=>e.confirmPassword=t),rules:[e.rules.required,e.rules.min8],type:"password",label:"inputConfirmPassword"},null,8,["modelValue","rules"]),a(n,{onClick:e.codeVerify,class:"full-width q-mt-sm ad-primary-btn"},{default:o(()=>[d(" submit ")]),_:1},8,["onClick"])]),a(u,{bordered:"",class:"q-pa-sm q-ma-sm",flat:""},{default:o(()=>[B,a(n,{"no-caps":"",dense:"",flat:"",disable:e.disable,loading:e.loading,class:"q-mx-xs",color:"primary",onClick:s[4]||(s[4]=t=>(e.onSubmit,e.disable=!0))},{default:o(()=>[d("tryAgain")]),_:1},8,["disable","loading"])]),_:1})]),_:1})):w("",!0),a(u,{bordered:"",class:"q-pa-sm q-ma-sm",flat:""},{default:o(()=>[N,a(n,{"no-caps":"",dense:"",flat:"",class:"q-mx-xs",color:"primary",onClick:s[5]||(s[5]=t=>e.$router.push("/accounts/signup"))},{default:o(()=>[d("signup")]),_:1})]),_:1})])])}var L=h(C,[["render",Q]]);export{L as default};
