import{a as o,ah as n}from"./index.9f5cea10.js";import{api as r}from"./axios.37489ddf.js";const f={dark:{type:Boolean,default:null}};function d(e,t){return o(()=>e.dark===null?t.dark.isActive:e.dark)}var a=()=>({token:"",user:"",isUserLoggedIn:!1}),u={authToken:e=>e.token},i={setToken(e){!e||(this.token=e,this.isUserLoggedIn=!0,localStorage.setItem("token",e))},setUser(e){this.user=e,localStorage.setItem("user",JSON.stringify(e))},updateUserInfo(e){const t=JSON.parse(localStorage.getItem("user"));e.name&&(t.name=e.name),e.avatar&&(t.avatar=e.avatar),this.user=t,localStorage.setItem("user",JSON.stringify(t))},tryAutoLogin(){const e=localStorage.getItem("token");if(!e)return;const t=JSON.parse(localStorage.getItem("user"));this.token=e,this.user=t,this.isUserLoggedIn=!0},clearAuth(){localStorage.clear("user"),localStorage.clear("token"),this.token=null,this.user=null,this.isUserLoggedIn=!1,this.isAdmin=!1}};const l=n("auth",{state:a,getters:u,actions:i});function c(){const e=l(),t=e.authToken,s=e.isUserLoggedIn;return t&&s?{headers:{authorization:t}}:{headers:{authorization:null}}}r.interceptors.request.use(function(e){return e.headers=c().headers,e},function(e){return Promise.reject(e)});r.interceptors.response.use(function(e){return e},function(e){return Promise.reject(e)});export{d as a,l as b,f as u};
