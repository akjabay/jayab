import{Q as u}from"./QInput.f55b9ace.js";import{_ as c,C as f,r as i,D as h,G as g,K as q,L as r,J as t,I as o,Q as n,F as w,O as l}from"./index.9f5cea10.js";import{Q as m}from"./QCard.c4dcc096.js";import{b as y}from"./request.cab34313.js";import{a as _}from"./index.2115cb6d.js";import{M as $}from"./MainTitleComp.ccf00b88.js";import"./use-form.4fbf8fd2.js";import"./axios.37489ddf.js";const v=f({name:"LoginPage",components:{MainTitleComp:$},setup(){return{user:i(""),password:i(""),rules:i({}),loading:i(!1)}},methods:{...h(y,["setUser","setToken"]),async login(){this.loading=!0;try{let e;if(!this.user||!this.password)return this.$q.notify({type:"warning",message:"failed",caption:"fillRequiredFields"});isNaN(this.user)?/\S+@\S+\.\S+/.test(this.user)?e="email":e="username":e="phone";const s=await _.auth.authLogin({login_type:e,user:this.user,password:this.password});if(s.data.errors)this.$q.notify({type:"warning",message:"failed",caption:"userNotFound"});else if(s.data.data.authLogin.token){const d=s.data.data.authLogin.user;this.setUser(d),this.setToken(s.data.data.authLogin.token),this.$router.push({path:"/"})}else this.$q.notify({type:"negative",message:"failed",caption:"failed"})}catch(e){this.loading=!1,console.log(e,"error on fecth data"),this.$q.notify({type:"negative",message:"failed",caption:"failed"})}this.loading=!1}},mounted(){this.rules={required:e=>!!e||"required",min3:e=>e.length>=3||"min3Character",min8:e=>e.length>=8||"min8Character",email:(e,s)=>s.email(e)||"havetoBeValidEmail"}}}),C={class:"row justify-center text-center q-mt-xl"},k={class:"col-12 col-md-4 col-sm-6 text-center"},V={class:"q-py-sm q-mx-sm"},b={class:"col-12 text-center"},L=r("span",null,"did You Forget Your Password",-1),N=r("span",null,"dont Have An Account",-1);function Q(e,s,d,U,B,P){const p=w("main-title-comp");return g(),q("div",C,[r("div",k,[t(p,{title:"login"}),r("div",V,[r("div",b,[t(u,{required:"",outlined:"",class:"q-mt-sm",modelValue:e.user,"onUpdate:modelValue":s[0]||(s[0]=a=>e.user=a),rules:[e.rules.required],label:"inputUser"},null,8,["modelValue","rules"]),t(u,{required:"",outlined:"",class:"q-mt-sm",modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=a=>e.password=a),type:"password",rules:[e.rules.required],label:"inputPassword"},null,8,["modelValue","rules"]),t(n,{loading:e.loading,onClick:e.login,class:"full-width q-mt-sm ad-primary-btn"},{default:o(()=>[l(" login ")]),_:1},8,["loading","onClick"])])]),t(m,{bordered:"",class:"q-pa-sm q-ma-sm",flat:""},{default:o(()=>[L,t(n,{"no-caps":"",dense:"",flat:"",class:"q-mx-xs",color:"secondary",onClick:s[2]||(s[2]=a=>e.$router.push("/accounts/reset-password"))},{default:o(()=>[l("reset Password")]),_:1})]),_:1}),t(m,{bordered:"",class:"q-pa-sm q-ma-sm",flat:""},{default:o(()=>[N,t(n,{"no-caps":"",dense:"",flat:"",class:"q-mx-xs",color:"primary",onClick:s[3]||(s[3]=a=>e.$router.push("/accounts/signup"))},{default:o(()=>[l("signup")]),_:1})]),_:1})])])}var Y=c(v,[["render",Q]]);export{Y as default};
