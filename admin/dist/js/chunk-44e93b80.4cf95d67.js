(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44e93b80"],{"334b":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("4360"),a=Object(n["a"])();function s(){var e=a.getters["auth/authGetter"].token,t=a.getters["auth/authGetter"].isUserLoggedIn;return e&&t?{headers:{authorization:e}}:{headers:{authorization:null}}}},"58bd":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"down-top-padding",attrs:{fluid:""}},[r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"12",lg:"4",md:"6",sm:"8",xs:"11"}},[r("v-card",[r("v-card-text",[r("h3",{staticClass:"title blue-grey--text text--darken-2 font-weight-regular"},[e._v(" کاربر جدید ")]),r("h6",{staticClass:"subtitle-2 font-weight-light"},[e._v(" افزودن کاربر با استفاده از نام کاربری، شماره موبایل یا ایمیل ")])]),r("v-divider"),r("v-card-text",[r("v-text-field",{attrs:{type:"text",label:"نام کامل",rules:[e.rules.required,e.rules.min4],filled:"","background-color":"transparent"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("v-text-field",{attrs:{type:"text",label:"موبایل یا ایمیل",rules:[e.rules.required,e.rules.min11,e.rules.emailMatchOnly],filled:"","background-color":"transparent"},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}}),r("v-text-field",{attrs:{type:"text",label:"انتخاب نام کاربری",rules:[e.rules.required,e.rules.min4],hint:e.unhint,error:!e.unconfirm,color:e.unconfirm?"success":"error",filled:"","background-color":"transparent"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("v-text-field",{attrs:{filled:"","background-color":"transparent","append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"password",name:"password",label:"رمز ورود",hint:"رمز ورود حداقل ۸ حرفی است.",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-btn",{staticClass:"text-capitalize mt-5 element-0",attrs:{color:"primary"},on:{click:e.addUser}},[e._v(" تایید و افزودن ")])],1)],1),e.alert_msg?r("AlertComponent",{attrs:{alertMsg:e.alert_msg,alertType:e.alert_type}}):e._e()],1)],1)],1)},a=[],s=r("1da1"),u=(r("96cf"),r("caad"),r("2532"),r("d3b7"),r("3ca3"),r("ddb0"),r("99af"),r("b0c0"),r("334b")),i={name:"UserAdd",data:function(){return{user:"",username:"",name:"",password:"",code:"",show1:!1,rules:{required:function(e){return!!e||"فیلد ضروری!"},min:function(e){return e.length>=8||"حداقل ۸ کاراکتر!"},min4:function(e){return e.length>=4||!isNaN(e)||"حداقل ۴ کاراکتر!"},min11:function(e){return 11==e.length||isNaN(e)||"شماره موبایل ۱۱ رقمی است!"},emailMatch:function(e){return!e.includes("@")||/\S+@\S+\.\S+/.test(e)||"ایمیل را درست وارد کنید!"},emailMatchOnly:function(e){return!isNaN(e)||/\S+@\S+\.\S+/.test(e)||"ایمیل را درست وارد کنید!"}},unhint:"نام کاربری مورد تایید نیست",unconfirm:!1,alert_msg:"",updated_at:"",newusermsg:""}},components:{AlertComponent:function(){return r.e("chunk-71afce82").then(r.bind(null,"df71"))}},methods:{addUser:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.alert_msg="",e.alert_type=null,r=isNaN(e.user)?/\S+@\S+\.\S+/.test(e.user)?"email":void 0:"phone",!r){t.next=16;break}return t.prev=4,t.next=7,e.$axios.post("/graphql",{query:"mutation {\n              userCreate (input: {\n                  ".concat(r,': "').concat(e.user,'"\n                  name: "').concat(e.username,'"\n                  username: "').concat(e.name,'"\n                  password: "').concat(e.password,'"\n                }) {\n                  id\n                  username\n                }\n              }')},Object(u["a"])());case 7:n=t.sent,n.data.data.userCreate.id?(e.alert_type="success",e.alert_msg="کاربر جدید با موفقیت اضافه شد."):(e.alert_type="error",e.alert_msg="اطلاعات وارد شده صحیح نیست."),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](4),console.log(t.t0);case 14:t.next=18;break;case 16:e.alert_type="error",e.alert_msg="فیلدها معتبر نیست.";case 18:case"end":return t.stop()}}),t,null,[[4,11]])})))()},checkUsername:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.username.length>=5)){e.next=15;break}return this.unhint="نام کاربری مورد تایید نیست",this.unconfirm=!1,e.prev=3,e.next=6,this.$axios.post("/graphql",{query:'query {\n                  authCheckUsername (username: "'.concat(this.username,'")\n                }')});case 6:t=e.sent,t.data.data.errors?this.alert_msg=t.data.data.errors[0].message:!0===t.data.data.authCheckUsername?this.unhint="نام کاربری تکراری است":!1===t.data.data.authCheckUsername&&(this.unhint="نام کاربری مورد تایید است",this.unconfirm=!0),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),console.error(e.t0);case 13:e.next=17;break;case 15:this.unhint="نام کاربری حداقل 5 حرف است",this.unconfirm=!1;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));function t(){return e.apply(this,arguments)}return t}()},watch:{username:function(){this.checkUsername()}}},c=i,o=r("2877"),l=r("6544"),d=r.n(l),m=r("8336"),h=r("b0af"),p=r("99d9"),f=r("62ad"),b=r("a523"),g=r("ce7e"),v=r("0fd9"),x=r("8654"),w=Object(o["a"])(c,n,a,!1,null,null,null);t["default"]=w.exports;d()(w,{VBtn:m["a"],VCard:h["a"],VCardText:p["b"],VCol:f["a"],VContainer:b["a"],VDivider:g["a"],VRow:v["a"],VTextField:x["a"]})}}]);
//# sourceMappingURL=chunk-44e93b80.4cf95d67.js.map