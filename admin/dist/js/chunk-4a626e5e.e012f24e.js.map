{"version":3,"sources":["webpack:///./src/middleware/authHeader.js","webpack:///./node_modules/core-js/modules/es.set.js","webpack:///./src/components/chartComponents/ProductBarChart.vue?361a","webpack:///src/components/chartComponents/ProductBarChart.vue","webpack:///./src/components/chartComponents/ProductBarChart.vue?c67d","webpack:///./src/components/chartComponents/ProductBarChart.vue"],"names":["Store","store","authHeader","token","getters","isUserLoggedIn","headers","collection","collectionStrong","module","exports","init","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","loading","attrs","randomId","labels","label","data","projects","backgroundColor","borderColor","hoverOffset","staticRenderFns","name","props","labelRange","components","Chart","LoadingComponent","methods","fetchData","mounted","watch","component"],"mappings":"kHAAA,kDACMA,EAAQC,iBAEC,SAASC,IACtB,IAAMC,EAAQH,EAAMI,QAAQ,mBAAmBD,MACzCE,EAAiBL,EAAMI,QAAQ,mBAAmBC,eACxD,OAAIF,GAASE,EACJ,CACLC,QAAS,CACP,cAAiBH,IAId,CACLG,QAAS,CACP,cAAiB,S,kCCdzB,IAAIC,EAAa,EAAQ,QACrBC,EAAmB,EAAQ,QAI/BC,EAAOC,QAAUH,EAAW,OAAO,SAAUI,GAC3C,OAAO,WAAiB,OAAOA,EAAKC,KAAMC,UAAUC,OAASD,UAAU,QAAKE,MAC3EP,I,yCCRH,IAAIQ,EAAS,WAAa,IAAIC,EAAIL,KAASM,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAGH,EAAIK,QAuBnGF,EAAG,mBAAmB,CAACG,MAAM,CAAC,QAAUN,EAAIK,WAvBgEF,EAAG,QAAQ,CAACG,MAAM,CAAC,SAAWN,EAAIO,SAAS,KAAO,MAAM,OAASP,EAAIQ,OAAO,SAAW,CAC1M,CACEC,MAAO,WACPC,KAAMV,EAAIW,SACVC,gBAAiB,CACf,0BACA,0BACA,0BACA,0BACA,0BACA,2BACA,4BAEFC,YAAa,CACX,oBACA,oBACA,oBACA,oBACA,oBACA,qBACA,sBAEFC,YAAa,QACgD,IACjEC,EAAkB,G,0ICiBtB,GACEC,KAAM,kBACNC,MAAO,CACLV,SAAU,CACR,KAAN,QAEIW,WAAY,CACV,KAAN,QAGER,KAAM,WAAR,OACMC,SAAU,GACVH,OAAQ,GACRH,SAAS,IAEbc,WAAY,CACVC,MAAO,WAAX,wDACIC,iBAAkB,WAAtB,0DAEEC,QAAS,CACPC,UAAW,WAAf,sKACA,gBACA,eACA,iBACA,GACA,gDACA,8CAEA,kBACA,+GACA,6GAEA,KACA,+CACA,0CAdA,UAgBA,iBACA,WACA,CACA,2EAEA,EAFA,kHAUA,kBA7BA,QAgBA,EAhBA,OA+BA,cACA,8BACA,4BACA,4BACA,yEACA,iCACA,wDACA,uBAGA,gBAzCA,sGAAe,IA4CbC,QAhEF,WAiEI7B,KAAK4B,aAEPE,MAAO,CACL,WAAJ,WACM,KAAN,eC9GwW,I,YCOpWC,EAAY,eACd,EACA3B,EACAgB,GACA,EACA,KACA,KACA,MAIa,aAAAW,E","file":"js/chunk-4a626e5e.e012f24e.js","sourcesContent":["import store from '../store/index'\r\nconst Store = store()\r\n\r\nexport default function authHeader () {\r\n  const token = Store.getters['auth/authGetter'].token\r\n  const isUserLoggedIn = Store.getters['auth/authGetter'].isUserLoggedIn\r\n  if (token && isUserLoggedIn) {\r\n    return {\r\n      headers: {\r\n        'authorization': token\r\n      }\r\n    }\r\n  } else {\r\n    return {\r\n      headers: {\r\n        'authorization': null\r\n      }\r\n    }\r\n  }\r\n}\r\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Set` constructor\n// https://tc39.es/ecma262/#sec-set-objects\nmodule.exports = collection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.loading)?_c('Chart',{attrs:{\"randomId\":_vm.randomId,\"type\":\"bar\",\"labels\":_vm.labels,\"datasets\":[\n      {\n        label: 'پروژه ها',\n        data: _vm.projects,\n        backgroundColor: [\n          'rgba(255, 99, 132, 0.2)',\n          'rgba(255, 159, 64, 0.2)',\n          'rgba(255, 205, 86, 0.2)',\n          'rgba(75, 192, 192, 0.2)',\n          'rgba(54, 162, 235, 0.2)',\n          'rgba(153, 102, 255, 0.2)',\n          'rgba(201, 203, 207, 0.2)'\n        ],\n        borderColor: [\n          'rgb(255, 99, 132)',\n          'rgb(255, 159, 64)',\n          'rgb(255, 205, 86)',\n          'rgb(75, 192, 192)',\n          'rgb(54, 162, 235)',\n          'rgb(153, 102, 255)',\n          'rgb(201, 203, 207)'\n        ],\n        hoverOffset: 4\n      } ]}}):_c('LoadingComponent',{attrs:{\"loading\":_vm.loading}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <Chart\r\n      v-if=\"!loading\"\r\n      :randomId=\"randomId\"\r\n      type=\"bar\"\r\n      :labels=\"labels\"\r\n      :datasets=\"[\r\n        {\r\n          label: 'پروژه ها',\r\n          data: projects,\r\n          backgroundColor: [\r\n            'rgba(255, 99, 132, 0.2)',\r\n            'rgba(255, 159, 64, 0.2)',\r\n            'rgba(255, 205, 86, 0.2)',\r\n            'rgba(75, 192, 192, 0.2)',\r\n            'rgba(54, 162, 235, 0.2)',\r\n            'rgba(153, 102, 255, 0.2)',\r\n            'rgba(201, 203, 207, 0.2)'\r\n          ],\r\n          borderColor: [\r\n            'rgb(255, 99, 132)',\r\n            'rgb(255, 159, 64)',\r\n            'rgb(255, 205, 86)',\r\n            'rgb(75, 192, 192)',\r\n            'rgb(54, 162, 235)',\r\n            'rgb(153, 102, 255)',\r\n            'rgb(201, 203, 207)'\r\n          ],\r\n          hoverOffset: 4\r\n        },\r\n      ]\"\r\n    />\r\n    <LoadingComponent v-else :loading=\"loading\" />\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport authHeader from \"../../middleware/authHeader\";\r\n\r\nexport default {\r\n  name: \"ProjectBarChart\",\r\n  props: {\r\n    randomId: {\r\n        type: Number,\r\n    },\r\n    labelRange: {\r\n        type: Array,\r\n    }\r\n  },\r\n  data: () => ({\r\n      projects: [],\r\n      labels: [],\r\n      loading: false,\r\n  }),\r\n  components: {\r\n    Chart: () => import(\"@/components/chartComponents/Chart.vue\"),\r\n    LoadingComponent: () => import(\"@/components/commonComponents/LoadingComponent\"),\r\n  },\r\n  methods: {\r\n    fetchData: async function () {\r\n      this.loading = true;\r\n      this.labels = []\r\n      this.projects = []\r\n      const dateTime = {\r\n        first_date: new Date().toISOString().slice(0,-5),\r\n        to_date: new Date().toISOString().slice(0,-5)\r\n      }\r\n      if (this.labelRange) {\r\n        dateTime.first_date = new Date(new Date().setMonth(new Date().getMonth() - this.labelRange[1])).toISOString().slice(0, -5);\r\n        dateTime.to_date = new Date(new Date().setMonth(new Date().getMonth() - this.labelRange[0])).toISOString().slice(0,-5);\r\n      }\r\n      let queryOptions = \"\";\r\n      queryOptions = queryOptions + ` from_date: \"${dateTime.first_date}\" \\n`;\r\n      queryOptions = queryOptions + ` to_date: \"${dateTime.to_date}\" \\n`;\r\n\r\n      const result = await this.$axios.post(\r\n        \"/graphql\",\r\n        {\r\n          query: `query {\r\n            reportProduct(query: {\r\n              ${queryOptions}\r\n            }) {\r\n              date\r\n              amount\r\n              label\r\n            }\r\n          }`,\r\n        },\r\n        authHeader()\r\n      );\r\n      if (result.data.errors) {\r\n        console.log(result.data.errors[0]);\r\n      } else if (result.data.data.reportProduct) {\r\n        const productRes = result.data.data.reportProduct;\r\n        this.labels = [...new Set(productRes.map((pr) => pr.date))];\r\n        this.labels.forEach((label) => {\r\n          const count = productRes.filter((pr) => pr.date === label).length;\r\n          this.projects.push(count);\r\n        })\r\n      }\r\n      this.loading = false;\r\n    },\r\n  },\r\n  mounted () {\r\n    this.fetchData();\r\n  },\r\n  watch: {\r\n      labelRange: function () {\r\n          this.fetchData()\r\n      }\r\n  }\r\n};\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductBarChart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProductBarChart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProductBarChart.vue?vue&type=template&id=07b3d848&\"\nimport script from \"./ProductBarChart.vue?vue&type=script&lang=js&\"\nexport * from \"./ProductBarChart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}