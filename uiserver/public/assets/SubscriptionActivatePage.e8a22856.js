import{Q as l}from"./QCardSection.9e482b55.js";import{Q as I,a as y}from"./QCard.37bf516d.js";import{Q as f}from"./QSeparator.159b8493.js";import{_ as A,d as V,r as c,D as r,E as $,G as s,C as q,j as a,L as d,I as i,J as p,R as b,F as g,M as D,H as o,O as z,Q as v,aw as B}from"./index.758da505.js";import{Q as P}from"./QCardActions.e5c1e1cc.js";import{Q as N}from"./QDialog.49e4cb1e.js";import{C as j}from"./ClosePopup.27b22d3b.js";import"./use-dark.d08f1f81.js";import{a as C}from"./index.b6409fd5.js";import{M as E}from"./MainTitleComp.b5d88647.js";import{S as F}from"./SubTitleComp.29d95159.js";import"./focusout.e509f8ae.js";import"./focus-manager.32f8d49a.js";import"./use-transition.f0850e0a.js";import"./axios.0e7880b2.js";const M=V({name:"SubscriptionActivatePage",components:{MainTitleComp:E,SubTitleComp:F},setup(){return{service:c({}),plans:c([]),activatingInfo:c({}),dialog:c(!1),disable:c(!1),loading:c(!1)}},methods:{onActivate:async function(e=[]){try{const{plan:n={},service:u={},duration:_}=e;this.activatingInfo={},(await C.user.userActivateService({serviceId:u.id,planId:n._id,duration:_})).data.data.userActivateService&&(Object.keys(e).forEach(h=>{this.activatingInfo[h]=e[h]}),this.dialog=!0)}catch(n){console.log(n,"error on fecth data"),this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}},fetchData:async function(){try{const e=this.$route.params.id,n=await C.main.getService({id:e});this.service=n.data.data.serviceFind;const u=await C.main.getPlans();u.data.success&&(this.plans=u.data.data),this.loaded=!0}catch(e){console.log(e,"error on fecth data"),this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}}},mounted(){this.fetchData()}}),O={class:"row justify-center"},T={class:"text-bold q-mb-md"},H={class:"text-center q-ma-sm"},L=o("span",{style:{"font-size":"25px"}},"\u{1F4A5}",-1),W=o("span",{style:{"font-size":"25px"}},"\u{1F4A5}",-1),G={class:"text-center q-ma-sm"},J=o("span",{style:{"font-size":"25px"}},"\u{1F4A5}",-1),R=o("span",{style:{"font-size":"25px"}},"\u{1F4A5}",-1),U={class:"text-bold q-mb-md"};function Y(e,n,u,_,Q,h){const S=q("main-title-comp"),w=q("sub-title-comp");return r(),$(I,null,{default:s(()=>[a(S,{title:e.$t("subscription")},null,8,["title"]),a(w,{title:e.$t("activate")},null,8,["title"]),e.service&&e.service.id?(r(),$(y,{key:0,flat:"",class:"q-ma-sm ad-box-bordered"},{default:s(()=>[a(l,null,{default:s(()=>[d(i(e.service.persian_codename),1)]),_:1}),a(l,null,{default:s(()=>[(r(!0),p(g,null,b(e.service.persian_accesses.split(","),(t,m)=>(r(),p("span",{class:"q-mx-sm",key:m},i("\u2705 "+t),1))),128))]),_:1})]),_:1})):D("",!0),o("div",O,[(r(!0),p(g,null,b(e.plans,(t,m)=>(r(),$(y,{key:m,flat:"",class:"q-ma-sm ad-fixed-card ad-box-bordered"},{default:s(()=>[a(l,null,{default:s(()=>[o("div",T,i("\u{1F947} "+t.name),1),o("div",null,i(t.description),1)]),_:2},1024),a(f),a(l,null,{default:s(()=>[o("div",null,i(e.$t("activate")+" "+e.$t("monthly")),1),a(v,{onClick:k=>e.onActivate({service:e.service,plan:t,duration:"month"}),outline:"",class:"full-width ad-secondary-btn",label:t.price.month+" "+e.$t(t.price.currency)},null,8,["onClick","label"])]),_:2},1024),a(f),a(l,null,{default:s(()=>[o("div",null,i(e.$t("activate")+" "+e.$t("quarterly")),1),o("div",H,[L,d(" "+i(t.price.month?(3*t.price.month-t.price.quarter)/(3*t.price.month)*100:0)+"% "+i(e.$t("discount"))+" ",1),W]),a(v,{onClick:k=>e.onActivate({service:e.service,plan:t,duration:"quarter"}),outline:"",class:"full-width ad-secondary-btn",label:t.price.quarter+" "+e.$t(t.price.currency)},null,8,["onClick","label"])]),_:2},1024),a(f),a(l,null,{default:s(()=>[o("div",null,i(e.$t("activate")+" "+e.$t("yearly")),1),o("div",G,[J,d(" "+i(t.price.month?(12*t.price.month-t.price.year)/(12*t.price.month)*100:0)+"% "+i(e.$t("discount"))+" ",1),R]),a(v,{onClick:k=>e.onActivate({service:e.service,plan:t,duration:"year"}),outline:"",class:"full-width ad-secondary-btn",label:t.price.year+" "+e.$t(t.price.currency)},null,8,["onClick","label"])]),_:2},1024)]),_:2},1024))),128)),a(N,{modelValue:e.dialog,"onUpdate:modelValue":n[0]||(n[0]=t=>e.dialog=t),persistent:"","transition-show":"scale","transition-hide":"scale",style:B({direction:e.$t("direction")==="rtl"?"rtl":"ltr"})},{default:s(()=>[a(y,{class:"my-card"},{default:s(()=>[a(l,null,{default:s(()=>[d(i(e.$t("activate")),1)]),_:1}),a(l,null,{default:s(()=>[d(i(e.activatingInfo.service.persian_codename),1)]),_:1}),a(l,null,{default:s(()=>[(r(!0),p(g,null,b(e.activatingInfo.service.persian_accesses.split(","),(t,m)=>(r(),p("span",{class:"q-mx-sm",key:m},i("\u2705 "+t),1))),128))]),_:1}),a(f),a(l,null,{default:s(()=>[o("div",U,i("\u{1F947} "+e.activatingInfo.plan.name),1),o("div",null,i(e.activatingInfo.plan.description),1),o("div",null,i(e.$t("activate")+" "+e.$t(e.activatingInfo.duration+"ly")),1)]),_:1}),a(f),a(l,null,{default:s(()=>[d(i(e.$t("yourOrderHasSubmittedWeWillCallYouSoon")),1)]),_:1}),a(P,{align:e.$t("direction")==="rtl"?"right":"left",class:"bg-white text-teal"},{default:s(()=>[z(a(v,{color:"red",flat:"",label:e.$t("ok")},null,8,["label"]),[[j]])]),_:1},8,["align"])]),_:1})]),_:1},8,["modelValue","style"])])]),_:1})}var ue=A(M,[["render",Y]]);export{ue as default};
