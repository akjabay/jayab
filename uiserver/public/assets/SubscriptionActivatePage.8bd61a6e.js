import{Q as r}from"./QCardSection.b00a13b0.js";import{Q as y}from"./QCard.6a86b0c3.js";import{Q as f}from"./QSeparator.1669020d.js";import{_ as I,d as A,r as c,D as n,E as $,G as s,C as k,j as a,M as d,I as i,J as p,aq as b,F as g,L as V,H as o,O as D,Q as v,aw as z}from"./index.92eb8bda.js";import{Q as B}from"./QCardActions.b7f8084b.js";import{Q as P}from"./QDialog.081ad832.js";import{Q as N}from"./QPage.22378cf4.js";import{C as j}from"./ClosePopup.868af168.js";import"./use-dark.ecf38b9d.js";import{a as C}from"./index.191899c2.js";import{M as E}from"./MainTitleComp.e992e00d.js";import{S as F}from"./SubTitleComp.385bd45c.js";import"./focusout.7593105c.js";import"./focus-manager.32f8d49a.js";import"./use-transition.76624cdd.js";import"./axios.a466877b.js";const M=A({name:"SubscriptionActivatePage",components:{MainTitleComp:E,SubTitleComp:F},setup(){return{service:c({}),plans:c([]),activatingInfo:c({}),dialog:c(!1),disable:c(!1),loading:c(!1)}},methods:{onActivate:async function(e=[]){try{const{plan:l={},service:u={},duration:_}=e;this.activatingInfo={},(await C.user.userActivateService({serviceId:u.id,planId:l._id,duration:_})).data.data.userActivateService&&(Object.keys(e).forEach(h=>{this.activatingInfo[h]=e[h]}),this.dialog=!0)}catch(l){console.log(l,"error on fecth data"),this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}},fetchData:async function(){try{const e=this.$route.params.id,l=await C.main.getService({id:e});this.service=l.data.data.serviceFind;const u=await C.main.getPlans();u.data.success&&(this.plans=u.data.data),this.loaded=!0}catch(e){console.log(e,"error on fecth data"),this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}}},mounted(){this.fetchData()}}),O={class:"row justify-center"},T={class:"text-bold q-mb-md"},H={class:"text-center q-ma-sm"},L=o("span",{style:{"font-size":"25px"}},"\u{1F4A5}",-1),W=o("span",{style:{"font-size":"25px"}},"\u{1F4A5}",-1),G={class:"text-center q-ma-sm"},J=o("span",{style:{"font-size":"25px"}},"\u{1F4A5}",-1),U=o("span",{style:{"font-size":"25px"}},"\u{1F4A5}",-1),Y={class:"text-bold q-mb-md"};function K(e,l,u,_,Q,h){const S=k("main-title-comp"),w=k("sub-title-comp");return n(),$(N,null,{default:s(()=>[a(S,{title:e.$t("subscription")},null,8,["title"]),a(w,{title:e.$t("activate")},null,8,["title"]),e.service&&e.service.id?(n(),$(y,{key:0,flat:"",class:"q-ma-sm ad-box-bordered"},{default:s(()=>[a(r,null,{default:s(()=>[d(i(e.service.persian_codename),1)]),_:1}),a(r,null,{default:s(()=>[(n(!0),p(g,null,b(e.service.persian_accesses.split(","),(t,m)=>(n(),p("span",{class:"q-mx-sm",key:m},i("\u2705 "+t),1))),128))]),_:1})]),_:1})):V("",!0),o("div",O,[(n(!0),p(g,null,b(e.plans,(t,m)=>(n(),$(y,{key:m,flat:"",class:"q-ma-sm ad-fixed-card ad-box-bordered"},{default:s(()=>[a(r,null,{default:s(()=>[o("div",T,i("\u{1F947} "+t.name),1),o("div",null,i(t.description),1)]),_:2},1024),a(f),a(r,null,{default:s(()=>[o("div",null,i(e.$t("activate")+" "+e.$t("monthly")),1),a(v,{onClick:q=>e.onActivate({service:e.service,plan:t,duration:"month"}),outline:"",class:"full-width ad-secondary-btn",label:t.price.month+" "+e.$t(t.price.currency)},null,8,["onClick","label"])]),_:2},1024),a(f),a(r,null,{default:s(()=>[o("div",null,i(e.$t("activate")+" "+e.$t("quarterly")),1),o("div",H,[L,d(" "+i(t.price.month?(3*t.price.month-t.price.quarter)/(3*t.price.month)*100:0)+"% "+i(e.$t("discount"))+" ",1),W]),a(v,{onClick:q=>e.onActivate({service:e.service,plan:t,duration:"quarter"}),outline:"",class:"full-width ad-secondary-btn",label:t.price.quarter+" "+e.$t(t.price.currency)},null,8,["onClick","label"])]),_:2},1024),a(f),a(r,null,{default:s(()=>[o("div",null,i(e.$t("activate")+" "+e.$t("yearly")),1),o("div",G,[J,d(" "+i(t.price.month?(12*t.price.month-t.price.year)/(12*t.price.month)*100:0)+"% "+i(e.$t("discount"))+" ",1),U]),a(v,{onClick:q=>e.onActivate({service:e.service,plan:t,duration:"year"}),outline:"",class:"full-width ad-secondary-btn",label:t.price.year+" "+e.$t(t.price.currency)},null,8,["onClick","label"])]),_:2},1024)]),_:2},1024))),128)),a(P,{modelValue:e.dialog,"onUpdate:modelValue":l[0]||(l[0]=t=>e.dialog=t),persistent:"","transition-show":"scale","transition-hide":"scale",style:z({direction:e.$t("direction")==="rtl"?"rtl":"ltr"})},{default:s(()=>[a(y,{class:"my-card"},{default:s(()=>[a(r,null,{default:s(()=>[d(i(e.$t("activate")),1)]),_:1}),a(r,null,{default:s(()=>[d(i(e.activatingInfo.service.persian_codename),1)]),_:1}),a(r,null,{default:s(()=>[(n(!0),p(g,null,b(e.activatingInfo.service.persian_accesses.split(","),(t,m)=>(n(),p("span",{class:"q-mx-sm",key:m},i("\u2705 "+t),1))),128))]),_:1}),a(f),a(r,null,{default:s(()=>[o("div",Y,i("\u{1F947} "+e.activatingInfo.plan.name),1),o("div",null,i(e.activatingInfo.plan.description),1),o("div",null,i(e.$t("activate")+" "+e.$t(e.activatingInfo.duration+"ly")),1)]),_:1}),a(f),a(r,null,{default:s(()=>[d(i(e.$t("yourOrderHasSubmittedWeWillCallYouSoon")),1)]),_:1}),a(B,{align:e.$t("direction")==="rtl"?"right":"left",class:"bg-white text-teal"},{default:s(()=>[D(a(v,{color:"red",flat:"",label:e.$t("ok")},null,8,["label"]),[[j]])]),_:1},8,["align"])]),_:1})]),_:1},8,["modelValue","style"])])]),_:1})}var me=I(M,[["render",K]]);export{me as default};
