import{u as _,Q as h}from"./use-dark.ecf38b9d.js";import{_ as O,d as k,r as i,B as F,D as a,E as p,G as m,C as r,H as c,j as o,N as f,Q as d,J as g,L as $}from"./index.92eb8bda.js";import{Q as v}from"./QInnerLoading.a43836d5.js";import{Q}from"./QPage.22378cf4.js";import{F as w}from"./FilterComp.001d0d9a.js";import{L as b}from"./ListComp.d238504a.js";import{P as B}from"./PaginationComp.77bf341b.js";import{E as L}from"./EmptyComp.53d9e691.js";import{a as S}from"./index.191899c2.js";import"./use-transition.76624cdd.js";import"./QSeparator.1669020d.js";import"./QInput.12ca7d0b.js";import"./use-form.c87ee303.js";import"./focus-manager.32f8d49a.js";import"./CityComp.d0d8ac6d.js";import"./QCardSection.b00a13b0.js";import"./selection.aecaed73.js";import"./focusout.7593105c.js";import"./format.801e7424.js";import"./QCardActions.b7f8084b.js";import"./QCard.6a86b0c3.js";import"./QDialog.081ad832.js";import"./QImg.19909024.js";import"./axios.a466877b.js";const q=k({name:"ManageListPage",setup(){return{filterOptions:i({}),products:i([]),currentPage:i(1),pagination:i({limit:10,offset:0,total:1}),loaded:i(!1),filtering:i(!1)}},components:{FilterComp:w,ListComp:b,PaginationComp:B,EmptyComp:L},methods:{onResetFilter(){this.filterOptions={},this.$refs.filterComp.resetState()},onChangeFilter(t){this.filterOptions=t},async onChangePage(t){await this.fetchData({page:t}),this.currentPage=t},async fetchData(t=[]){try{const{page:e}=t;e&&(this.pagination.offset=(e-1)*this.pagination.limit);const l={};Object.keys(this.filterOptions).forEach(n=>{l[n]=this.filterOptions[n]});const s=await S.product.productFindMyProducts({limit:this.pagination.limit,offset:this.pagination.offset,sorting:"cteaedAt: -1",categoryId:this.filterOptions.category?this.filterOptions.category.id:"",latlng:this.filterOptions.city?this.filterOptions.city.lat_long:"",...l});if(s.status===200){const n=s.data.data.productFindMyProducts.hits;this.products=n,this.pagination=s.data.data.productFindMyProducts.pagination}this.loaded=!0}catch(e){console.log(e),this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}}},computed:{...F(_,["user"])},mounted(){this.fetchData()}}),D={class:"row"},E={key:0},M={class:"row"},N={key:0},I={key:1};function V(t,e,l,s,n,j){const u=r("filter-comp"),y=r("list-comp"),C=r("pagination-comp"),P=r("empty-comp");return a(),p(Q,null,{default:m(()=>[c("div",null,[c("div",D,[o(h),o(d,{onClick:e[0]||(e[0]=z=>t.filtering=!t.filtering),outline:"",class:"q-ma-xs ad-font-color","no-caps":""},{default:m(()=>[t.filtering?(a(),p(f,{key:0,class:"",size:"1.5em",name:"fas fa-caret-up"})):(a(),p(f,{key:1,class:"",size:"1.5em",name:"fa fa-filter"}))]),_:1})]),t.filtering?(a(),g("div",E,[o(u,{ref:"filterComp",onOnChangeFilter:t.onChangeFilter,filterOptions:t.filterOptions},null,8,["onOnChangeFilter","filterOptions"]),c("div",M,[o(h),o(d,{onClick:t.onResetFilter,outline:"",class:"q-ma-xs ad-font-color",label:t.$t("clean"),"no-caps":""},null,8,["onClick","label"]),o(d,{onClick:t.fetchData,class:"q-ma-xs ad-primary-btn",label:t.$t("search"),"no-caps":""},{default:m(()=>[o(f,{class:"q-pr-md",name:"fa fa-magnifying-glass"})]),_:1},8,["onClick","label"])])])):$("",!0)]),t.products.length>0?(a(),g("div",N,[o(y,{items:t.products},null,8,["items"]),o(C,{onSelectPage:t.onChangePage,currentPage:t.currentPage,pagination:t.pagination},null,8,["onSelectPage","currentPage","pagination"])])):(a(),g("div",I,[o(P)])),o(v,{showing:!t.loaded},null,8,["showing"])]),_:1})}var ct=O(q,[["render",V]]);export{ct as default};
