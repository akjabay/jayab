import{l as I,i as ie,m as A,n as Z,c,h as g,p as V,g as ee,q as re,t as ce,r as q,u as de,v as T,w as B,a as fe,x as me,y as pe,z as ve,d as te,A as he,B as ge,_ as oe,C as F,D as v,E as C,G as r,j as s,H as u,I as h,J as _,K as w,L as Q,Q as z,M as P,N as $e,O as E,P as W}from"./index.e3bb839c.js";import{Q as ye,a as X,b as be,c as K,d as R}from"./selection.19156545.js";import{g as G}from"./focusout.1ff9a27a.js";import{Q as ue}from"./QImg.4d2abf6d.js";import{u as ae,Q as ne}from"./index.53176d0e.js";import{D as qe,Q as we}from"./DarkComp.d4887011.js";import{C as J}from"./ClosePopup.25aa6c51.js";import{a as ke}from"./index.ad5a5923.js";import"./focus-manager.32f8d49a.js";import"./QBtnGroup.323b7aa4.js";import"./use-transition.ef594146.js";import"./use-form.3b78d9ef.js";import"./QToggle.b725a832.js";import"./axios.70926cff.js";var Ce=I({name:"QPageContainer",setup(e,{slots:t}){const{proxy:{$q:i}}=ee(),l=ie(Z,A);if(l===A)return console.error("QPageContainer needs to be child of QLayout"),A;re(ce,!0);const n=c(()=>{const d={};return l.header.space===!0&&(d.paddingTop=`${l.header.size}px`),l.right.space===!0&&(d[`padding${i.lang.rtl===!0?"Left":"Right"}`]=`${l.right.size}px`),l.footer.space===!0&&(d.paddingBottom=`${l.footer.size}px`),l.left.space===!0&&(d[`padding${i.lang.rtl===!0?"Right":"Left"}`]=`${l.left.size}px`),d});return()=>g("div",{class:"q-page-container",style:n.value},V(t.default))}}),Se=I({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:t,emit:i}){const{proxy:{$q:l}}=ee(),n=q(null),d=q(l.screen.height),f=q(e.container===!0?0:l.screen.width),m=q({position:0,direction:"down",inflectionPoint:0}),k=q(0),$=q(de.value===!0?0:G()),O=c(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),U=c(()=>e.container===!1?{minHeight:l.screen.height+"px"}:null),D=c(()=>$.value!==0?{[l.lang.rtl===!0?"left":"right"]:`${$.value}px`}:null),y=c(()=>$.value!==0?{[l.lang.rtl===!0?"right":"left"]:0,[l.lang.rtl===!0?"left":"right"]:`-${$.value}px`,width:`calc(100% + ${$.value}px)`}:null);function S(a){if(e.container===!0||document.qScrollPrevented!==!0){const p={position:a.position.top,direction:a.direction,directionChanged:a.directionChanged,inflectionPoint:a.inflectionPoint.top,delta:a.delta.top};m.value=p,e.onScroll!==void 0&&i("scroll",p)}}function N(a){const{height:p,width:L}=a;let H=!1;d.value!==p&&(H=!0,d.value=p,e.onScrollHeight!==void 0&&i("scrollHeight",p),x()),f.value!==L&&(H=!0,f.value=L),H===!0&&e.onResize!==void 0&&i("resize",a)}function M({height:a}){k.value!==a&&(k.value=a,x())}function x(){if(e.container===!0){const a=d.value>k.value?G():0;$.value!==a&&($.value=a)}}let o=null;const b={instances:{},view:c(()=>e.view),isContainer:c(()=>e.container),rootRef:n,height:d,containerHeight:k,scrollbarWidth:$,totalWidth:c(()=>f.value+$.value),rows:c(()=>{const a=e.view.toLowerCase().split(" ");return{top:a[0].split(""),middle:a[1].split(""),bottom:a[2].split("")}}),header:T({size:0,offset:0,space:!1}),right:T({size:300,offset:0,space:!1}),footer:T({size:0,offset:0,space:!1}),left:T({size:300,offset:0,space:!1}),scroll:m,animate(){o!==null?clearTimeout(o):document.body.classList.add("q-body--layout-animate"),o=setTimeout(()=>{o=null,document.body.classList.remove("q-body--layout-animate")},155)},update(a,p,L){b[a][p]=L}};if(re(Z,b),G()>0){let L=function(){a=null,p.classList.remove("hide-scrollbar")},H=function(){if(a===null){if(p.scrollHeight>l.screen.height)return;p.classList.add("hide-scrollbar")}else clearTimeout(a);a=setTimeout(L,300)},j=function(se){a!==null&&se==="remove"&&(clearTimeout(a),L()),window[`${se}EventListener`]("resize",H)},a=null;const p=document.body;B(()=>e.container!==!0?"add":"remove",j),e.container!==!0&&j("add"),fe(()=>{j("remove")})}return()=>{const a=me(t.default,[g(ye,{onScroll:S}),g(X,{onResize:N})]),p=g("div",{class:O.value,style:U.value,ref:e.container===!0?void 0:n,tabindex:-1},a);return e.container===!0?g("div",{class:"q-layout-container overflow-hidden",ref:n},[g(X,{onResize:M}),g("div",{class:"absolute-full",style:D.value},[g("div",{class:"scroll",style:y.value},[p])])]):p}}}),Le=I({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:t}){const i=c(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>g("div",{class:i.value},V(t.default))}}),Y=I({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const i=c(()=>parseInt(e.lines,10)),l=c(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(i.value===1?" ellipsis":"")),n=c(()=>e.lines!==void 0&&i.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":i.value}:null);return()=>g("div",{style:n.value,class:l.value},V(t.default))}}),le=I({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:t}){const i=c(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>g("div",{class:i.value,role:"toolbar"},V(t.default))}}),Qe=I({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:t,emit:i}){const{proxy:{$q:l}}=ee(),n=ie(Z,A);if(n===A)return console.error("QHeader needs to be child of QLayout"),A;const d=q(parseInt(e.heightHint,10)),f=q(!0),m=c(()=>e.reveal===!0||n.view.value.indexOf("H")>-1||l.platform.is.ios&&n.isContainer.value===!0),k=c(()=>{if(e.modelValue!==!0)return 0;if(m.value===!0)return f.value===!0?d.value:0;const o=d.value-n.scroll.value.position;return o>0?o:0}),$=c(()=>e.modelValue!==!0||m.value===!0&&f.value!==!0),O=c(()=>e.modelValue===!0&&$.value===!0&&e.reveal===!0),U=c(()=>"q-header q-layout__section--marginal "+(m.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+($.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),D=c(()=>{const o=n.rows.value.top,b={};return o[0]==="l"&&n.left.space===!0&&(b[l.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),o[2]==="r"&&n.right.space===!0&&(b[l.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),b});function y(o,b){n.update("header",o,b)}function S(o,b){o.value!==b&&(o.value=b)}function N({height:o}){S(d,o),y("size",o)}function M(o){O.value===!0&&S(f,!0),i("focusin",o)}B(()=>e.modelValue,o=>{y("space",o),S(f,!0),n.animate()}),B(k,o=>{y("offset",o)}),B(()=>e.reveal,o=>{o===!1&&S(f,e.modelValue)}),B(f,o=>{n.animate(),i("reveal",o)}),B(n.scroll,o=>{e.reveal===!0&&S(f,o.direction==="up"||o.position<=e.revealOffset||o.position-o.inflectionPoint<100)});const x={};return n.instances.header=x,e.modelValue===!0&&y("size",d.value),y("space",e.modelValue),y("offset",k.value),pe(()=>{n.instances.header===x&&(n.instances.header=void 0,y("size",0),y("offset",0),y("space",!1))}),()=>{const o=ve(t.default,[]);return e.elevated===!0&&o.push(g("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),o.push(g(X,{debounce:0,onResize:N})),g("header",{class:U.value,style:D.value,onFocusin:M},o)}}});const _e=te({name:"AppHeader",props:{},components:{DarkComp:qe},setup(){return{isBackExists:q(!1),isRealStateOwner:q(!1)}},methods:{...he(ae,["clearAuth","tryAutoLogin","setUser"]),onItemClick(e){this.$router.push(e)},onLogout(){this.clearAuth(),this.$router.push("/accounts/login")},isRouteActive(e,t=[]){return this.$route.matched[1].path==e||t.includes(this.$route.path)?"active":""},onSetLocals(){const e=localStorage.getItem("locale");e?this.$i18n.locale=e:this.$i18n.locale="fa-IR";const t=localStorage.getItem("mode");t&&this.$q.dark.set(t=="true")},async fetchData(){if(this.isUserLoggedIn)try{const e=await ke.auth.authFindMe();if(e.data.errors)this.$q.notify({type:"warning",message:this.$t("failed"),caption:this.$t("userNotFound")});else if(e.data.data.authFindMe.id){const t=e.data.data.authFindMe;this.setUser(t)}}catch{this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}}},computed:{...ge(ae,["isUserLoggedIn","user"])},mounted(){this.tryAutoLogin(),this.onSetLocals(),this.isBackExists=this.$router.options&&this.$router.options.history&&this.$router.options.history.state&&this.$router.options.history.state.back,this.user&&this.user.permissions&&(this.isRealStateOwner=this.user.permissions.find(e=>e.codename==="write product"))},beforeMount(){}}),ze={key:0,class:"row"},Re={key:3},Be={key:4},Ae={key:0},Ie={class:"row justify-center"};function xe(e,t,i,l,n,d){const f=F("dark-comp");return v(),C(Qe,{reveal:"",bordered:"",class:w(e.$q.dark.isActive?"ad-toolbar-dark":"ad-toolbar")},{default:r(()=>[s(le,null,{default:r(()=>[s(Le,{onClick:t[0]||(t[0]=m=>e.$router.push("/")),class:"text-pointer"},{default:r(()=>[s(ue,{class:"q-mx-sm",width:"40px",src:"icons/favicon-128x128.png"}),u("span",null,h(e.$t("jayab")),1)]),_:1}),e.$q.screen.gt.xs?(v(),_("div",ze,[u("div",{class:w(["ad-secondary-btn q-pa-sm q-mx-sm pointer text-body1",e.isRouteActive("/")]),onClick:t[1]||(t[1]=m=>e.$router.push("/"))},h(e.$t("home")),3),u("div",{class:w(["ad-secondary-btn q-pa-sm q-mx-sm pointer text-body1",e.isRouteActive("/items",["/items/list","/items/map"])]),onClick:t[2]||(t[2]=m=>e.$router.push("/items/list"))},h(e.$t("publicProducts")),3),e.isRealStateOwner?(v(),_("div",{key:0,class:w(["ad-secondary-btn q-pa-sm q-mx-sm pointer text-body1",e.isRouteActive("/accounts/plus",["/accounts/plus/manage-map","/accounts/plus/manage-list"])]),onClick:t[3]||(t[3]=m=>e.$router.push("/accounts/plus"))},h(e.$t("manage")),3)):Q("",!0)])):Q("",!0),e.$q.screen.gt.xs?(v(),C(ne,{key:1})):Q("",!0),e.$q.screen.gt.xs?(v(),C(ne,{key:2})):Q("",!0),u("div",null,[s(f,{isDense:!0})]),e.isUserLoggedIn?(v(),_("div",Be,[s(we,{class:"q-ml-xs q-pl-xs",flat:"",round:""},{label:r(()=>[e.user?(v(),_("div",Ae,[s($e,{size:"sm",name:"account_circle"})])):Q("",!0)]),default:r(()=>[s(be,null,{default:r(()=>[E((v(),C(K,{clickable:"",onClick:t[4]||(t[4]=m=>e.onItemClick("/accounts/profile/"+e.user.username))},{default:r(()=>[s(R,{avatar:""},{default:r(()=>[s(W,{icon:"person"})]),_:1}),s(R,null,{default:r(()=>[s(Y,null,{default:r(()=>[P(h(e.user.name),1)]),_:1})]),_:1})]),_:1})),[[J]]),E((v(),C(K,{clickable:"",onClick:t[5]||(t[5]=m=>e.onItemClick("/accounts/subscription"))},{default:r(()=>[s(R,{avatar:""},{default:r(()=>[s(W,{icon:"fa fa-plus-square"})]),_:1}),s(R,null,{default:r(()=>[s(Y,null,{default:r(()=>[P(h(e.$t("plusSubscription")),1)]),_:1})]),_:1})]),_:1})),[[J]]),E((v(),C(K,{clickable:"",onClick:e.onLogout},{default:r(()=>[s(R,{avatar:""},{default:r(()=>[s(W,{icon:"logout"})]),_:1}),s(R,null,{default:r(()=>[s(Y,null,{default:r(()=>[P(h(e.$t("logout")),1)]),_:1})]),_:1})]),_:1},8,["onClick"])),[[J]])]),_:1})]),_:1})])):(v(),_("div",Re,[s(z,{class:"ad-secondary-btn q-mx-xs",outline:"",to:"/accounts/login"},{default:r(()=>[P(h(e.$t("login")),1)]),_:1}),s(z,{class:"ad-primary-btn",to:"/accounts/signup"},{default:r(()=>[P(h(e.$t("signup")),1)]),_:1})]))]),_:1}),e.$q.screen.lt.sm?(v(),C(le,{key:0,class:"text-primary justify-center"},{default:r(()=>[u("div",Ie,[u("div",{class:w(["ad-secondary-btn q-pa-sm q-mx-sm pointer text-body1",e.isRouteActive("/")]),onClick:t[6]||(t[6]=m=>e.$router.push("/"))},h(e.$t("home")),3),u("div",{class:w(["ad-secondary-btn q-pa-sm q-mx-sm pointer text-body1",e.isRouteActive("/items",["/items/list","/items/map"])]),onClick:t[7]||(t[7]=m=>e.$router.push("/items/list"))},h(e.$t("publicProducts")),3),e.isRealStateOwner?(v(),_("div",{key:0,class:w(["ad-secondary-btn q-pa-sm q-mx-sm pointer text-body1",e.isRouteActive("/accounts/plus",["/accounts/plus/manage-map","/accounts/plus/manage-list"])]),onClick:t[8]||(t[8]=m=>e.$router.push("/accounts/plus"))},h(e.$t("manage")),3)):Q("",!0)])]),_:1})):Q("",!0)]),_:1},8,["class"])}var He=oe(_e,[["render",xe]]);const Pe=te({name:"AppFooter",components:{},setup(){return{}},methods:{onScroll(e=[]){const{id:t}=e,i=document.getElementById(t);i?i.scrollIntoView({behavior:"smooth"}):this.$router.push("/")},onOpenUrl(e){window.open(e,"_blank")}},mounted(){}}),Te={class:"q-pt-md q-mt-md"},Fe=u("hr",{class:"line-style-two"},null,-1),Ve={class:""},Oe={class:"row q-pb-md"},Ue={class:"col-md-3 col-sm-3 col-xs-3"},De={class:""},Ne={class:"col-md-3 col-sm-3 col-xs-3"},Me={class:"col-md-6 col-sm-6 col-xs-6"},je={class:"col-7 q-pt-sm text-bold"},Ee=u("div",{class:"q-pt-sm"},"Built By AraTech Group",-1),We=[Ee];function Ke(e,t,i,l,n,d){return v(),_("div",Te,[Fe,u("div",Ve,[s(ue,{class:"q-mx-sm",width:"40px",src:"icons/favicon-128x128.png"})]),u("div",Oe,[u("div",Ue,[u("div",De,[s(z,{flat:"","no-caps":"",onClick:t[0]||(t[0]=f=>e.$router.push("/")),label:e.$t("home")},null,8,["label"])]),u("div",null,[s(z,{flat:"","no-caps":"",onClick:t[1]||(t[1]=f=>e.$router.push("/products")),label:e.$t("products")},null,8,["label"])])]),u("div",Ne,[u("div",null,[s(z,{flat:"","no-caps":"",onClick:t[2]||(t[2]=f=>e.onScroll({id:"aboutUs"})),label:e.$t("aboutUs")},null,8,["label"])])]),u("div",Me,[u("div",{class:w(["q-pa-sm q-gutter-sm",e.$t("direction")==="rtl"?"text-left":"text-right"])},[s(z,{round:"",type:"a",target:"blank",href:"https://t.me/jayab",icon:"telegram",style:{color:"#30a4da"}}),s(z,{round:"",type:"a",target:"blank",href:"https://instagram.com/jayab",icon:"fa fa-brands fa-instagram",style:{color:"#f74c04"}})],2)])]),u("div",{class:w(["row q-pa-md",e.$q.dark.isActive?"":"bg-grey-3"])},[u("div",je,h(e.$t("copyRight"))+" - "+h(new Date().getFullYear()),1),u("div",{class:w(["col-5",e.$t("direction")=="rtl"?"text-left":"text-right"])},We,2)],2)])}var Ge=oe(Pe,[["render",Ke]]);const Je=te({name:"MainLayout",components:{AppHeader:He,AppFooter:Ge},setup(){return q(!1),{}}});function Ye(e,t,i,l,n,d){const f=F("app-header"),m=F("router-view"),k=F("app-footer");return v(),C(Se,{view:"lHh Lpr lFf",class:"ad-layout"},{default:r(()=>[s(f),s(Ce,{class:"ad-page"},{default:r(()=>[s(m),s(k)]),_:1})]),_:1})}var ft=oe(Je,[["render",Ye]]);export{ft as default};
