import{Q as C}from"./format.0584e0b6.js";import{Q as $}from"./QCard.37bf516d.js";import{M as P}from"./MainTitleComp.b5d88647.js";import{S as _}from"./SubTitleComp.29d95159.js";import{a as I,P as B}from"./PaginationComp.b7fd894a.js";import{E as v}from"./EmptyComp.de87cb4a.js";import{a as k}from"./index.b6409fd5.js";import{_ as w,d as F,r as n,D as a,E as p,G as q,C as e,j as i,H as l,J as r,F as D,R as E,M as Q}from"./index.758da505.js";import"./use-dark.d08f1f81.js";import"./use-transition.f0850e0a.js";import"./QImg.92ead9aa.js";import"./QCardSection.9e482b55.js";import"./CategoryComp.e7feb518.js";import"./QInput.5c706ea3.js";import"./use-form.dadb0a3a.js";import"./focus-manager.32f8d49a.js";import"./axios.0e7880b2.js";const S=F({name:"CategoryPage",setup(){return{category:n({}),currentPage:n(1),pagination:n({limit:10,offset:0,total:1}),loaded:n(!1)}},components:{MainTitleComp:P,SubTitleComp:_,ProductCard:I,PaginationComp:B,EmptyComp:v},methods:{async onChangePage(t){await this.fetchData({page:t}),this.currentPage=t},fetchData:async function({page:t}=[]){const s=this.$route.params.categoryId;t&&(this.pagination.offset=(t-1)*this.pagination.limit);try{const o=await k.main.categoryFindByCategory({categoryId:s,limit:this.pagination.limit,offset:this.pagination.offset,language:this.$i18n.locale});if(o.data.errors)this.$q.notify({type:"warning",message:this.$t("failed"),caption:this.$t("failed")});else if(o.data.data.categoryFindByCategory){const c=o.data.data.categoryFindByCategory;o.data.data.categoryFindByCategory.pagination&&(this.pagination=o.data.data.categoryFindByCategory.pagination),this.category=c,this.loaded=!0}}catch(o){console.log(o,"error on fecth data"),this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}}},mounted(){this.fetchData()}}),T={class:"q-px-xs"},b={key:0},M={class:"row"},N={key:1};function V(t,s,o,c,L,j){const d=e("main-title-comp"),m=e("sub-title-comp"),g=e("ProductCard"),y=e("empty-comp"),u=e("pagination-comp");return a(),p($,null,{default:q(()=>[i(d,{title:(t.$t("direction")=="rtl"?t.$t("categoryTitle")+" ":"")+(t.category[t.$i18n.locale.split("-")[0]+"_name"]?t.category[t.$i18n.locale.split("-")[0]+"_name"]:"")+(t.$t("direction")!="rtl"?" "+t.$t("categoryTitle"):"")},null,8,["title"]),i(m,{title:t.$t("products")},null,8,["title"]),l("div",T,[t.category.productIds&&t.category.productIds.length>0?(a(),r("div",b,[l("div",M,[(a(!0),r(D,null,E(t.category.productIds,(f,h)=>(a(),r("div",{key:h,class:"col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6 q-py-sm"},[i(g,{style:{margin:"auto"},product:f},null,8,["product"])]))),128))])])):(a(),r("div",N,[i(y)]))]),t.category.productIds&&t.category.productIds.length>0||t.category.postIds&&t.category.postIds.length>0?(a(),p(u,{key:0,onSelectPage:t.onChangePage,currentPage:t.currentPage,pagination:t.pagination},null,8,["onSelectPage","currentPage","pagination"])):Q("",!0),i(C,{showing:!t.loaded},null,8,["showing"])]),_:1})}var et=w(S,[["render",V]]);export{et as default};
