import{Q as m}from"./QInput.5c706ea3.js";import{_ as f,d as c,r as l,A as g,D as $,E as q,G as a,C as y,H as o,j as t,L as n,I as r,Q as d}from"./index.758da505.js";import{Q as w,a as p}from"./QCard.37bf516d.js";import{b as v}from"./use-dark.d08f1f81.js";import{a as C}from"./index.b6409fd5.js";import{M as k}from"./MainTitleComp.b5d88647.js";import"./use-form.dadb0a3a.js";import"./focus-manager.32f8d49a.js";import"./axios.0e7880b2.js";const V=c({name:"LoginPage",components:{MainTitleComp:k},setup(){return{user:l(""),password:l(""),rules:l({}),loading:l(!1)}},methods:{...g(v,["setUser","setToken"]),async login(){this.loading=!0;try{let e;if(!this.user||!this.password)return this.$q.notify({type:"warning",message:this.$t("failed"),caption:this.$t("fillRequiredFields")});isNaN(this.user)?/\S+@\S+\.\S+/.test(this.user)?e="email":e="username":e="phone";const s=await C.auth.authLogin({login_type:e,user:this.user,password:this.password});if(s.data.errors)this.$q.notify({type:"warning",message:this.$t("failed"),caption:this.$t("informationIsWrong")});else if(s.data.data.authLogin.token){const u=s.data.data.authLogin.user;this.setUser(u),this.setToken(s.data.data.authLogin.token),this.$router.push({path:"/"})}else this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}catch(e){this.loading=!1,console.log(e,"error on fecth data"),this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}this.loading=!1}},mounted(){this.rules={required:e=>!!e||this.$t("required"),min3:e=>e.length>=3||this.$t("min3Character"),min8:e=>e.length>=8||this.$t("min8Character"),email:(e,s)=>s.email(e)||this.$t("havetoBeValidEmail")}}}),b={class:"row justify-center text-center q-mt-xl"},L={class:"col-12 col-md-4 col-sm-6 text-center"},Q={class:"q-py-sm q-mx-sm"},P={class:"col-12 text-center"};function U(e,s,u,A,B,N){const h=y("main-title-comp");return $(),q(w,null,{default:a(()=>[o("div",b,[o("div",L,[t(h,{title:e.$t("login")},null,8,["title"]),o("div",Q,[o("div",P,[t(m,{required:"",outlined:"",class:"q-mt-sm",modelValue:e.user,"onUpdate:modelValue":s[0]||(s[0]=i=>e.user=i),rules:[e.rules.required],label:e.$t("inputUser")},null,8,["modelValue","rules","label"]),t(m,{required:"",outlined:"",class:"q-mt-sm",modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=i=>e.password=i),type:"password",rules:[e.rules.required],label:e.$t("inputPassword")},null,8,["modelValue","rules","label"]),t(d,{loading:e.loading,onClick:e.login,class:"full-width q-mt-sm ad-primary-btn"},{default:a(()=>[n(r(e.$t("login")),1)]),_:1},8,["loading","onClick"])])]),t(p,{bordered:"",class:"q-pa-sm q-ma-sm",flat:""},{default:a(()=>[o("span",null,r(e.$t("didYouForgetYourPassword")),1),t(d,{"no-caps":"",dense:"",flat:"",class:"q-mx-xs",color:"secondary",onClick:s[2]||(s[2]=i=>e.$router.push("/accounts/reset-password"))},{default:a(()=>[n(r(e.$t("resetPassword")),1)]),_:1})]),_:1}),t(p,{bordered:"",class:"q-pa-sm q-ma-sm",flat:""},{default:a(()=>[o("span",null,r(e.$t("dontHaveAnAccount")),1),t(d,{"no-caps":"",dense:"",flat:"",class:"q-mx-xs",color:"primary",onClick:s[3]||(s[3]=i=>e.$router.push("/accounts/signup"))},{default:a(()=>[n(r(e.$t("signup")),1)]),_:1})]),_:1})])])]),_:1})}var Y=f(V,[["render",U]]);export{Y as default};
