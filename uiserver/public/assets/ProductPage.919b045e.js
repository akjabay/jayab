import{Q as he}from"./format.0584e0b6.js";import{a as ge,Q as ye}from"./QCard.37bf516d.js";import{Q as _e}from"./QToggle.ad15b1a4.js";import{Q as Z}from"./QSeparator.159b8493.js";import{u as $e,a as ke,b as pe,Q as H}from"./use-dark.d08f1f81.js";import{ai as Ce,ab as x,U as Pe,aC as we,ak as G,aD as ee,am as ae,$ as te,al as oe,r as S,c as g,w as ne,g as me,W as qe,h as _,ac as be,aQ as Se,p as ie,aR as Ie,l as fe,o as Ae,y as Le,av as Te,at as De,Q,x as Qe,d as j,_ as W,D as c,E as T,G as P,j as l,K as se,H as i,I as f,O as Me,B as ve,C as D,J as k,N as R,M as b,P as re,F as Be,R as Ve}from"./index.758da505.js";import{g as le,s as ue}from"./CityComp.e4e85926.js";import{e as Ne}from"./selection.31cc2582.js";import{u as Ue,a as ze,b as Ee,D as Fe}from"./DateComp.558ba3a8.js";import{C as Oe}from"./CategoryComp.e7feb518.js";import{Q as ce}from"./QCardSection.9e482b55.js";import{Q as xe}from"./QCardActions.e5c1e1cc.js";import{Q as Re}from"./QDialog.49e4cb1e.js";import{C as je}from"./ClosePopup.27b22d3b.js";import{a as J}from"./index.b6409fd5.js";import{I as We}from"./ImageComp.f732b1f6.js";import{M as Ke}from"./MapComp.decf5a7c.js";import"./use-transition.f0850e0a.js";import"./use-form.dadb0a3a.js";import"./focusout.e509f8ae.js";import"./focus-manager.32f8d49a.js";import"./axios.0e7880b2.js";import"./MapAddPointComp.81f183ed.js";import"./QInput.5c706ea3.js";import"./FilterComp.7309b231.js";import"./QItemLabel.1bcc401f.js";import"./QMenu.d44f46b3.js";import"./ImageUploaderComp.969c6c46.js";import"./QImg.92ead9aa.js";import"./SubTitleComp.29d95159.js";function Xe(e){const o=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((a,v)=>{const r=parseFloat(a);r&&(o[v]=r)}),o}var Ye=Ce({name:"touch-swipe",beforeMount(e,{value:o,arg:a,modifiers:v}){if(v.mouse!==!0&&x.has.touch!==!0)return;const r=v.mouseCapture===!0?"Capture":"",t={handler:o,sensitivity:Xe(a),direction:le(v),noop:Pe,mouseStart(s){ue(s,t)&&we(s)&&(G(t,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(s,!0))},touchStart(s){if(ue(s,t)){const m=s.target;G(t,"temp",[[m,"touchmove","move","notPassiveCapture"],[m,"touchcancel","end","notPassiveCapture"],[m,"touchend","end","notPassiveCapture"]]),t.start(s)}},start(s,m){x.is.firefox===!0&&ee(e,!0);const w=ae(s);t.event={x:w.left,y:w.top,time:Date.now(),mouse:m===!0,dir:!1}},move(s){if(t.event===void 0)return;if(t.event.dir!==!1){te(s);return}const m=Date.now()-t.event.time;if(m===0)return;const w=ae(s),q=w.left-t.event.x,p=Math.abs(q),y=w.top-t.event.y,d=Math.abs(y);if(t.event.mouse!==!0){if(p<t.sensitivity[1]&&d<t.sensitivity[1]){t.end(s);return}}else if(p<t.sensitivity[2]&&d<t.sensitivity[2])return;const $=p/m,I=d/m;t.direction.vertical===!0&&p<d&&p<100&&I>t.sensitivity[0]&&(t.event.dir=y<0?"up":"down"),t.direction.horizontal===!0&&p>d&&d<100&&$>t.sensitivity[0]&&(t.event.dir=q<0?"left":"right"),t.direction.up===!0&&p<d&&y<0&&p<100&&I>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&p<d&&y>0&&p<100&&I>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&p>d&&q<0&&d<100&&$>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&p>d&&q>0&&d<100&&$>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(te(s),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ne(),t.styleCleanup=N=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const A=()=>{document.body.classList.remove("no-pointer-events--children")};N===!0?setTimeout(A,50):A()}),t.handler({evt:s,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:m,distance:{x:p,y:d}})):t.end(s)},end(s){t.event!==void 0&&(oe(t,"temp"),x.is.firefox===!0&&ee(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),s!==void 0&&t.event.dir!==!1&&te(s),t.event=void 0)}};if(e.__qtouchswipe=t,v.mouse===!0){const s=v.mouseCapture===!0||v.mousecapture===!0?"Capture":"";G(t,"main",[[e,"mousedown","mouseStart",`passive${s}`]])}x.has.touch===!0&&G(t,"main",[[e,"touchstart","touchStart",`passive${v.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,o){const a=e.__qtouchswipe;a!==void 0&&(o.oldValue!==o.value&&(typeof o.value!="function"&&a.end(),a.handler=o.value),a.direction=le(o.modifiers))},beforeUnmount(e){const o=e.__qtouchswipe;o!==void 0&&(oe(o,"main"),oe(o,"temp"),x.is.firefox===!0&&ee(e,!1),o.styleCleanup!==void 0&&o.styleCleanup(),delete e.__qtouchswipe)}});function He(){const e=new Map;return{getCache:function(o,a){return e[o]===void 0?e[o]=a:e[o]},getCacheWithFn:function(o,a){return e[o]===void 0?e[o]=a():e[o]}}}const Ge={name:{required:!0},disable:Boolean},de={setup(e,{slots:o}){return()=>_("div",{class:"q-panel scroll",role:"tabpanel"},ie(o.default))}},Je={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Ze=["update:modelValue","beforeTransition","transition"];function et(){const{props:e,emit:o,proxy:a}=me(),{getCacheWithFn:v}=He();let r,t;const s=S(null),m=S(null);function w(n){const u=e.vertical===!0?"up":"left";L((a.$q.lang.rtl===!0?-1:1)*(n.direction===u?1:-1))}const q=g(()=>[[Ye,w,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),p=g(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),y=g(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),d=g(()=>`--q-transition-duration: ${e.transitionDuration}ms`),$=g(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),I=g(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),N=g(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);ne(()=>e.modelValue,(n,u)=>{const C=M(n)===!0?E(n):-1;t!==!0&&U(C===-1?0:C<E(u)?-1:1),s.value!==C&&(s.value=C,o("beforeTransition",n,u),qe(()=>{o("transition",n,u)}))});function A(){L(1)}function K(){L(-1)}function z(n){o("update:modelValue",n)}function M(n){return n!=null&&n!==""}function E(n){return r.findIndex(u=>u.props.name===n&&u.props.disable!==""&&u.props.disable!==!0)}function X(){return r.filter(n=>n.props.disable!==""&&n.props.disable!==!0)}function U(n){const u=n!==0&&e.animated===!0&&s.value!==-1?"q-transition--"+(n===-1?p.value:y.value):null;m.value!==u&&(m.value=u)}function L(n,u=s.value){let C=u+n;for(;C>-1&&C<r.length;){const V=r[C];if(V!==void 0&&V.props.disable!==""&&V.props.disable!==!0){U(n),t=!0,o("update:modelValue",V.props.name),setTimeout(()=>{t=!1});return}C+=n}e.infinite===!0&&r.length>0&&u!==-1&&u!==r.length&&L(n,n===-1?r.length:-1)}function F(){const n=E(e.modelValue);return s.value!==n&&(s.value=n),!0}function Y(){const n=M(e.modelValue)===!0&&F()&&r[s.value];return e.keepAlive===!0?[_(Ie,I.value,[_(N.value===!0?v($.value,()=>({...de,name:$.value})):de,{key:$.value,style:d.value},()=>n)])]:[_("div",{class:"q-panel scroll",style:d.value,key:$.value,role:"tabpanel"},[n])]}function h(){if(r.length!==0)return e.animated===!0?[_(be,{name:m.value},Y)]:Y()}function B(n){return r=Se(ie(n.default,[])).filter(u=>u.props!==null&&u.props.slot===void 0&&M(u.props.name)===!0),r.length}function O(){return r}return Object.assign(a,{next:A,previous:K,goTo:z}),{panelIndex:s,panelDirectives:q,updatePanelsList:B,updatePanelIndex:F,getPanelContent:h,getEnabledPanels:X,getPanels:O,isValidPanelName:M,keepAliveProps:I,needsUniqueKeepAliveWrapper:N,goToPanelByOffset:L,goToPanel:z,nextPanel:A,previousPanel:K}}var tt=fe({name:"QCarouselSlide",props:{...Ge,imgSrc:String},setup(e,{slots:o}){const a=g(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>_("div",{class:"q-carousel__slide",style:a.value},ie(o.default))}});const ot=["top","right","bottom","left"],nt=["regular","flat","outline","push","unelevated"];var st=fe({name:"QCarousel",props:{...$e,...Je,...Ue,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>nt.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>ot.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...ze,...Ze],setup(e,{slots:o}){const{proxy:{$q:a}}=me(),v=ke(e,a);let r=null,t;const{updatePanelsList:s,getPanelContent:m,panelDirectives:w,goToPanel:q,previousPanel:p,nextPanel:y,getEnabledPanels:d,panelIndex:$}=et(),{inFullscreen:I}=Ee(),N=g(()=>I.value!==!0&&e.height!==void 0?{height:e.height}:{}),A=g(()=>e.vertical===!0?"vertical":"horizontal"),K=g(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(I.value===!0?" fullscreen":"")+(v.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${A.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${X.value}`:"")),z=g(()=>{const h=[e.prevIcon||a.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||a.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&a.lang.rtl===!0?h.reverse():h}),M=g(()=>e.navigationIcon||a.iconSet.carousel.navigationIcon),E=g(()=>e.navigationActiveIcon||M.value),X=g(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),U=g(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));ne(()=>e.modelValue,()=>{e.autoplay&&L()}),ne(()=>e.autoplay,h=>{h?L():r!==null&&(clearTimeout(r),r=null)});function L(){const h=De(e.autoplay)===!0?Math.abs(e.autoplay):5e3;r!==null&&clearTimeout(r),r=setTimeout(()=>{r=null,h>=0?y():p()},h)}Ae(()=>{e.autoplay&&L()}),Le(()=>{r!==null&&clearTimeout(r)});function F(h,B){return _("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${h} q-carousel__navigation--${X.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[_("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},d().map(B))])}function Y(){const h=[];if(e.navigation===!0){const B=o["navigation-icon"]!==void 0?o["navigation-icon"]:n=>_(Q,{key:"nav"+n.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${n.active===!0?"":"in"}active`,...n.btnProps,onClick:n.onClick}),O=t-1;h.push(F("buttons",(n,u)=>{const C=n.props.name,V=$.value===u;return B({index:u,maxIndex:O,name:C,active:V,btnProps:{icon:V===!0?E.value:M.value,size:"sm",...U.value},onClick:()=>{q(C)}})}))}else if(e.thumbnails===!0){const B=e.controlColor!==void 0?` text-${e.controlColor}`:"";h.push(F("thumbnails",O=>{const n=O.props;return _("img",{key:"tmb#"+n.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${n.name===e.modelValue?"":"in"}active`+B,src:n.imgSrc||n["img-src"],onClick:()=>{q(n.name)}})}))}return e.arrows===!0&&$.value>=0&&((e.infinite===!0||$.value>0)&&h.push(_("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${A.value} absolute flex flex-center`},[_(Q,{icon:z.value[0],...U.value,onClick:p})])),(e.infinite===!0||$.value<t-1)&&h.push(_("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${A.value} absolute flex flex-center`},[_(Q,{icon:z.value[1],...U.value,onClick:y})]))),Qe(o.control,h)}return()=>(t=s(o),_("div",{class:K.value,style:N.value},[Te("div",{class:"q-carousel__slides-container"},m(),"sl-cont",e.swipeable,()=>w.value)].concat(Y())))}});const it=j({name:"LoginAlertComp",props:{},setup(){return{alert:S(!1)}},components:{},methods:{onLoginAlert(){this.alert=!0}}}),at={class:"text-h6"},rt={class:"q-pt-md text-center"};function lt(e,o,a,v,r,t){return c(),T(Re,{modelValue:e.alert,"onUpdate:modelValue":o[1]||(o[1]=s=>e.alert=s)},{default:P(()=>[l(ge,{style:{width:"300px"}},{default:P(()=>[l(ce,{class:se(e.$t("direction")=="rtl"?"text-right":"")},{default:P(()=>[i("div",at,f(e.$t("login")),1)]),_:1},8,["class"]),l(ce,{class:se([e.$t("direction")=="rtl"?"text-right":"","q-pt-none"])},{default:P(()=>[i("div",null,f(e.$t("youHaveToLoginFirst")),1),i("div",rt,[l(Q,{onClick:o[0]||(o[0]=s=>e.$router.push("/accounts/login")),"no-caps":"",unelevated:"",rounded:"",class:"ad-primary-btn",label:e.$t("loginOrSignup")},null,8,["label"])])]),_:1},8,["class"]),l(xe,{align:e.$t("direction")=="rtl"?"left":"right"},{default:P(()=>[Me(l(Q,{flat:"",label:e.$t("ok"),class:"ad-font-color"},null,8,["label"]),[[je]])]),_:1},8,["align"])]),_:1})]),_:1},8,["modelValue"])}var ut=W(it,[["render",lt]]);const ct=j({name:"ActionsComp",props:{item:Object},setup(){return{isLiked:S(!1),loading:S({like:!1,share:!1})}},components:{LoginAlertComp:ut},methods:{checkIsLiked(e){e?e++:e=1,this.user&&(this.item.likes&&this.item.likes.users?this.item.likes.users.findIndex(a=>a.userId==this.user.id)>-1&&(this.isLiked=!0):e<10&&setTimeout(()=>{this.checkIsLiked(e)},1e3))},async onLike(){if(this.loading.like=!0,this.isUserLoggedIn){if(this.item){const e=this.item.id;try{(await J.user.userAddToLikes({id:e})).data.data.userAddToLikes.id?this.isLiked=!0:this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}catch(o){this.loading.like=!1,console.log(o,"error on fecth data"),this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}}}else this.$refs.loginAlert.onLoginAlert();this.loading.like=!1},async onDislike(){if(this.loading.like=!0,this.isUserLoggedIn){if(this.item){const e=this.item.id;try{(await J.user.userRemoveFromLikes({id:e})).data.data.userRemoveFromLikes.id?this.isLiked=!1:this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}catch(o){this.loading.like=!1,console.log(o,"error on fecth data"),this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}}}else this.$refs.loginAlert.onLoginAlert();this.loading.like=!1},async onShare(){if(this.item){this.loading.share=!0;const e=window.location.href;await navigator.share({title:this.item.title,url:e}),this.loading.share=!1}}},computed:{...ve(pe,["isUserLoggedIn","user"])},mounted(){this.checkIsLiked()}}),dt={key:0,class:"row"};function pt(e,o,a,v,r,t){const s=D("login-alert-comp");return e.item?(c(),k("div",dt,[i("div",{class:se(["col",e.$t("direction")=="rtl"?"text-right":"text-left"])},[l(Q,{loading:e.loading.like,size:"md",flat:"",round:""},{default:P(()=>[e.isLiked?(c(),T(R,{key:0,onClick:e.onDislike,style:{opacity:"0.8"},class:"text-red",name:"fa-solid fa-heart"},null,8,["onClick"])):(c(),T(R,{key:1,onClick:e.onLike,style:{opacity:"0.8"},name:"fa-regular fa-heart"},null,8,["onClick"]))]),_:1},8,["loading"]),l(Q,{size:"md",flat:"",round:""},{default:P(()=>[l(R,{onClick:e.onShare,loading:e.loading.share,style:{opacity:"0.8"},name:"fa-regular fa-share-from-square"},null,8,["onClick","loading"])]),_:1})],2),l(s,{ref:"loginAlert"},null,512)])):b("",!0)}var mt=W(ct,[["render",pt]]);const ft=j({name:"UserSmallComp",components:{ImageComp:We},props:{user:{type:Object}},setup:()=>({})}),vt={key:0,class:""},ht={class:"pointer text-center"},gt={class:"pointer q-mt-md q-mx-xs font-weight-light"};function yt(e,o,a,v,r,t){const s=D("image-comp");return e.user?(c(),k("div",vt,[i("div",{onClick:o[0]||(o[0]=m=>e.$router.push("/accounts/profile/"+e.user.username))},[i("span",ht,[e.user.avatar_url?(c(),T(re,{key:0,size:"50px"},{default:P(()=>[l(s,{link:e.user.avatar_url,size:"50px",isThumb:!0},null,8,["link"])]),_:1})):(c(),T(re,{key:1,color:"white"},{default:P(()=>[l(R,{size:"sm",name:"fa-regular fa-user"})]),_:1}))]),i("span",gt,[i("span",null,f(e.user.name),1)])])])):b("",!0)}var _t=W(ft,[["render",yt]]);const $t=j({name:"ProductMain",props:{product:Object},components:{CategoryComp:Oe,DateComp:Fe,ActionsComp:mt,MapComp:Ke,UserSmallComp:_t},setup(){return{showingPhone:S(""),slide:S(0),isPublic:S(!1)}},methods:{onShowPhone(){this.showingPhone||(this.showingPhone=this.product.userId.phone)},onToggle:async function(){try{(await J.product.productUpdate({pid:this.product.pid,isPublic:this.isPublic})).status===200&&this.$q.notify({type:"positive",message:this.$t("success"),caption:this.$t("success")})}catch(e){console.log(e),this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}},fetchData:function(){if(this.product&&this.product.latlng){const e=this.product.latlng,o=e?{latitude:e.split(",")[0],longitude:e.split(",")[1]}:{};this.$refs.map.setCurrentPositionMap({location:o}),this.$refs.map.onAddingMarker({markers:[this.product]}),this.isPublic=this.product.isPublic}else setTimeout(()=>{this.fetchData()},100)}},computed:{...ve(pe,["isUserLoggedIn","user"])},mounted(){this.fetchData()}}),kt={class:"q-ma-sm q-pa-sm q-ma-sm"},Ct={class:"row"},Pt={class:"col-12 col-md-5 col-sm-5 col-xs-12 q-pa-xs"},wt={class:"row"},qt={key:0,class:"col-6"},bt={key:0},St={class:"q-px-md"},It={class:""},At=i("hr",{class:"line-style-two"},null,-1),Lt={class:"ad-product-card-title text-bold"},Tt={key:0,class:"ad-box q-my-sm"},Dt={class:"ad-low-opacity"},Qt={key:1,class:"ad-box q-my-sm"},Mt={class:"ad-low-opacity"},Bt={class:"ad-low-opacity q-px-xs"},Vt={class:"row"},Nt={class:"col-12"},Ut={class:"row q-my-sm"},zt={class:"ad-low-opacity"},Et={class:"col-12"},Ft={class:"row q-my-sm"},Ot={class:"ad-low-opacity"},xt={class:"col-12"},Rt={class:"row q-my-sm"},jt={class:"ad-low-opacity"},Wt={key:2,class:"q-my-sm"},Kt={key:3,class:"row justify-center q-my-sm"},Xt=["href"],Yt={class:"q-px-lg q-py-xs q-mr-lg bg-green",style:{"border-radius":"25pc",color:"white"}},Ht={key:1},Gt={key:0,class:"col-12 col-md-7 col-sm-7 col-xs-12 q-pa-xs"},Jt={class:"row q-my-sm"};function Zt(e,o,a,v,r,t){const s=D("user-small-comp"),m=D("category-comp"),w=D("date-comp"),q=D("actions-comp"),p=D("map-comp");return c(),k("div",kt,[i("div",Ct,[i("div",Pt,[i("div",wt,[l(s,{class:"col-6",user:e.product.userId},null,8,["user"]),e.product.userId&&e.user&&e.user.id?(c(),k("div",qt,[e.product.userId.id===e.user.id?(c(),k("div",bt,[i("div",St,[i("span",It,f(e.$t("publicMode")),1),l(_e,{modelValue:e.isPublic,"onUpdate:modelValue":o[0]||(o[0]=y=>e.isPublic=y),onClick:e.onToggle,icon:"people"},null,8,["modelValue","onClick"])])])):b("",!0)])):b("",!0)]),At,i("div",Lt,f(e.product.name),1),e.product.price?(c(),k("div",Tt,[i("span",null,f(e.product.price.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1),i("span",Dt,f(e.$t("toman")),1)])):b("",!0),e.product.pricePerMeter?(c(),k("div",Qt,[i("span",Mt,f(e.$t("perMeter")+" "),1),i("span",null,f(e.product.pricePerMeter.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),1),i("span",Bt,f(e.$t("toman")),1)])):b("",!0),l(m,{category:e.product.categoryId},null,8,["category"]),l(Z),i("div",Vt,[i("div",Nt,[i("div",Ut,[i("span",zt,f(e.$t("totalArea")),1),l(H),i("span",null,f(e.product.area),1)])]),i("div",Et,[i("div",Ft,[i("span",Ot,f(e.$t("areaOfBuilding")),1),l(H),i("span",null,f(e.product.areaOfBuilding),1)])]),i("div",xt,[i("div",Rt,[i("span",jt,f(e.$t("address")),1),l(H),i("span",null,f(e.product.address),1)])])]),l(Z),e.product.userId&&e.isUserLoggedIn&&(e.user.id==e.product.userId.id||e.user.is_superuser==1)?(c(),k("div",Wt,f(e.$t("owner")+": "+e.product.ownerInfo),1)):b("",!0),e.product.userId&&e.product.userId.phone?(c(),k("div",Kt,[l(Q,{onClick:e.onShowPhone,size:"lg",class:"ad-font-color",outline:"",rounded:""},{default:P(()=>[i("span",null,f(e.showingPhone),1),e.showingPhone?(c(),k("a",{key:0,class:"",href:`tel:${e.product.userId.phone}`},[i("span",Yt,[l(R,{size:"sm",class:"q-px-sm",name:"fa fa-phone"})])],8,Xt)):(c(),k("span",Ht,f(e.$t("showPhone")),1))]),_:1},8,["onClick"])])):b("",!0)]),e.product.images&&e.product.images.length>0?(c(),k("div",Gt,[l(st,{class:"q-my-sm",modelValue:e.slide,"onUpdate:modelValue":o[1]||(o[1]=y=>e.slide=y),arrows:e.product.images&&e.product.images.length>1,navigation:e.product.images&&e.product.images.length>1,infinite:"","control-color":"primary","control-type":"outline",style:{}},{default:P(()=>[(c(!0),k(Be,null,Ve(e.product.images,(y,d)=>(c(),T(tt,{key:d,name:d,"img-src":e.$api.getImageUrl(e.$q.screen,y.url,void 0,void 0,!0)},null,8,["name","img-src"]))),128))]),_:1},8,["modelValue","arrows","navigation"])])):b("",!0)]),i("div",Jt,[l(w,{date:e.product.createdAt},null,8,["date"]),l(H),e.product?(c(),T(q,{key:0,item:e.product},null,8,["item"])):b("",!0)]),l(p,{ref:"map",liteMode:!0,signleMode:!0,zoom:15,mapWidth:"50vh"},null,512),l(Z)])}var eo=W($t,[["render",Zt]]);const to=j({name:"ProductPage",components:{ProductMain:eo},setup(){return{product:S({}),loaded:S(!1)}},methods:{fetchData:async function(){const e=this.$route.params.pid;try{const o=await J.product.productFindComplete({pid:e});this.product=o.data.data.productFind,this.loaded=!0}catch(o){console.log(o,"error on fecth data"),this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}}},mounted(){this.fetchData()}});function oo(e,o,a,v,r,t){const s=D("ProductMain");return c(),T(ye,null,{default:P(()=>[e.loaded?(c(),T(s,{key:0,product:e.product},null,8,["product"])):b("",!0),l(he,{showing:!e.loaded},null,8,["showing"])]),_:1})}var Mo=W(to,[["render",oo]]);export{Mo as default};
