import{Q as g}from"./QInput.01d67d73.js";import{d as _,r as p,_ as O,D as a,J as r,j as t,G as s,N as d,M as h,I as m,Q as y,F as $,aq as v,H as n,at as B,E as S,L as C,C as b}from"./index.e3bb839c.js";import{Q as P}from"./QCardSection.d70113f2.js";import{Q as q}from"./QSeparator.6f4dd93e.js";import{b as I,c as k,d as u}from"./selection.19156545.js";import{Q as V,C as j}from"./CityComp.1fb8f8be.js";import{Q as z}from"./index.53176d0e.js";import{Q as A}from"./QCardActions.ac1a2785.js";import{Q as U}from"./QCard.ecc37e14.js";import{Q as E}from"./QDialog.b86ce403.js";import{a as Q}from"./index.ad5a5923.js";const M=_({name:"SelectComp",props:{item:{type:Object,required:!1},items:{type:Array,required:!1,default:p([])}},setup(){return{secondItems:p([]),selectDialog:p(!1)}},methods:{onSelectParentItem(e){this.secondItems=this.items.filter(l=>l.parent_id===e.name),this.secondItems.length>0&&(this.secondItems[0].parent=e)},onSelectItem(e){this.$emit("on-select-item",e),this.secondItems=[],this.selectDialog=!1},onReset(){this.onSelectItem({}),this.selectDialog=!1}}}),N={class:"q-pa-md"},L={key:0},R={key:1},G={key:0},H={key:1},J={class:"q-my-sm"},T={class:"q-px-xs"},K={class:"q-px-md text-bold"},W={class:"q-px-xs"};function X(e,l,c,F,D,w){return a(),r("div",N,[t(y,{outline:"","no-caps":"",class:"full-width ad-secondary-btn",onClick:l[0]||(l[0]=o=>e.selectDialog=!0)},{default:s(()=>[e.item&&e.item.name?(a(),r("span",L,[t(d,{class:"q-mx-sm",size:"xs",name:e.item.icon_url},null,8,["name"]),h(" "+m(e.item[e.$i18n.locale.split("-")[0]+"_name"])+" ",1),t(d,{class:"q-mr-xs",name:"check"})])):(a(),r("span",R,[h(m(e.$t("chooseCategory"))+" ",1),t(d,{class:"mr-1",name:"arrow_"+e.$t("left")},null,8,["name"])]))]),_:1}),t(E,{modelValue:e.selectDialog,"onUpdate:modelValue":l[3]||(l[3]=o=>e.selectDialog=o),style:B("direction: "+e.$t("direction"))},{default:s(()=>[t(U,{class:"q-pa-none q-ma-none",style:{"min-width":"350px"}},{default:s(()=>[t(P,null,{default:s(()=>[h(m(e.$t("chooseCategory")),1)]),_:1}),t(q),e.secondItems.length==0?(a(),r("div",G,[t(V,{style:{height:"300px"}},{default:s(()=>[t(I,null,{default:s(()=>[(a(!0),r($,null,v(e.items,(o,f)=>(a(),r($,null,[o.parent_id==="root"?(a(),S(k,{clickable:"",key:f,class:"pointer",onClick:i=>e.onSelectParentItem(o)},{default:s(()=>[t(u,{avatar:""},{default:s(()=>[n("span",null,m(f),1)]),_:2},1024),t(u,null,{default:s(()=>[t(d,{size:"xs",name:o.icon_url},null,8,["name"])]),_:2},1024),t(u,null,{default:s(()=>[h(m(o[e.$i18n.locale.split("-")[0]+"_name"]),1)]),_:2},1024),t(u,{avatar:""},{default:s(()=>[t(d,{name:"arrow_"+e.$t("left")},null,8,["name"])]),_:1})]),_:2},1032,["onClick"])):C("",!0)],64))),256))]),_:1})]),_:1})])):(a(),r("div",H,[n("div",J,[t(y,{flat:"",class:"ad-secondary-btn text-center",onClick:l[1]||(l[1]=o=>e.secondItems=[])},{default:s(()=>[t(d,{name:"arrow_"+e.$t("right")},null,8,["name"])]),_:1}),n("span",T,[t(d,{size:"xs",name:e.secondItems[0].icon_url},null,8,["name"])]),n("span",K,m(e.secondItems[0].parent[e.$i18n.locale.split("-")[0]+"_name"]),1)]),t(V,{style:{height:"300px"}},{default:s(()=>[t(I,null,{default:s(()=>[(a(!0),r($,null,v(e.secondItems,(o,f)=>(a(),S(k,{clickable:"",key:f,class:"pointer",onClick:i=>e.onSelectItem(o)},{default:s(()=>[t(u,{avatar:""},{default:s(()=>[n("span",null,m(f+1),1)]),_:2},1024),t(u,{avatar:""},{default:s(()=>[n("span",W,[t(d,{size:"xs",name:o.icon_url},null,8,["name"])])]),_:2},1024),t(u,null,{default:s(()=>[h(m(o[e.$i18n.locale.split("-")[0]+"_name"]),1)]),_:2},1024),t(u,{avatar:""},{default:s(()=>[t(d,{name:"arrow_"+e.$t("left")},null,8,["name"])]),_:1})]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])),t(q),t(A,null,{default:s(()=>[t(z),t(y,{flat:"",color:"red",onClick:e.onReset},{default:s(()=>[h(m(e.$t("reset")),1)]),_:1},8,["onClick"]),t(y,{flat:"",onClick:l[2]||(l[2]=o=>e.selectDialog=!1)},{default:s(()=>[h(m(e.$t("cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","style"])])}var Y=O(M,[["render",X]]);const Z=_({name:"FilterComp",props:{onlySelect:Boolean,fetchedCategory:Object,filterOptions:Object},components:{SelectComp:Y,CityComp:j},setup(){return{categories:p([]),provinces:p([]),cities:p([]),filter:p({area:"",pricePerMeter:"",areaOfBuilding:"",rooms:"",city:{},category:{},price:void 0}),rules:p({})}},methods:{onSelectCity(e){this.filter.city=e,this.$emit("on-change-filter",this.filter)},onSelectCategory(e){this.filter.category=e,this.$emit("on-change-filter",this.filter)},onChangeFilter(){this.$emit("on-change-filter",this.filter)},async fetchData(){try{const e=await Q.main.categoryFindAll();if(e.status===200){const c=e.data.data.categoryFindAll;this.categories=c}const l=await Q.main.getProvinces();if(l.status===200){const c=l.data.data;this.provinces=c}}catch(e){console.log(e),this.$q.notify({type:"negative",message:this.$t("failed"),caption:this.$t("failed")})}},resetState(){Object.keys(this.filter).forEach(e=>{this.filter[e]=typeof this.filter[e]=="object"?{}:""})},initializeState(){const e=this.filterOptions?this.filterOptions:{};Object.keys(e).forEach(c=>{this.filter[c]=e[c]});const l=e.category?e.category:this.fetchedCategory;l&&l.id&&this.onSelectCategory(l),e.city&&e.city.id&&this.onSelectCity(e.city)}},mounted(){this.fetchData(),this.initializeState(),this.rules={required:e=>!!e||this.$t("required"),min3:e=>e.length>=3||this.$t("min3Character"),min8:e=>e.length>=8||this.$t("min8Character"),is10:e=>e.length==10||this.$t("is10Character"),email:(e,l)=>l.email(e)||this.$t("havetoBeValidEmail")}}}),x={class:"row"},ee={key:0,class:"col-md-6 col-sm-6 col-xs-6"},te={class:"col-12 col-md-12 col-sm-12 col-xs-12"},le={key:0,class:"row q-mx-md"},se={class:"col-md-3 col-sm-4 col-xs-6 q-px-sm"},oe={class:"col-md-3 col-sm-4 col-xs-6 q-px-sm"},ae={class:"col-md-3 col-sm-4 col-xs-6 q-px-sm"},ne={class:"col-md-3 col-sm-4 col-xs-6 q-px-sm"},ie={class:"col-md-3 col-sm-4 col-xs-6 q-px-sm"};function re(e,l,c,F,D,w){const o=b("select-comp"),f=b("city-comp");return a(),r("div",null,[n("div",x,[t(o,{class:"col-md-6 col-sm-6 col-xs-6",items:e.categories,item:e.filter.category,onOnSelectItem:e.onSelectCategory},null,8,["items","item","onOnSelectItem"]),e.onlySelect?C("",!0):(a(),r("div",ee,[t(f,{items:e.provinces,item:e.filter.city,onOnSelectItem:e.onSelectCity},null,8,["items","item","onOnSelectItem"])])),n("div",te,[e.onlySelect?C("",!0):(a(),r("div",le,[n("div",se,[t(g,{outlined:"",dense:"",class:"q-mt-sm",type:"number",min:"0",onChange:e.onChangeFilter,modelValue:e.filter.area,"onUpdate:modelValue":l[0]||(l[0]=i=>e.filter.area=i),rules:[],label:e.$t("inputArea")},null,8,["onChange","modelValue","label"])]),n("div",oe,[t(g,{outlined:"",dense:"",class:"q-mt-sm",type:"number",min:"0",onChange:e.onChangeFilter,modelValue:e.filter.pricePerMeter,"onUpdate:modelValue":l[1]||(l[1]=i=>e.filter.pricePerMeter=i),rules:[],label:e.$t("inputPricePerMeter")},null,8,["onChange","modelValue","label"])]),n("div",ae,[t(g,{outlined:"",dense:"",class:"q-mt-sm",type:"number",min:"0",onChange:e.onChangeFilter,modelValue:e.filter.areaOfBuilding,"onUpdate:modelValue":l[2]||(l[2]=i=>e.filter.areaOfBuilding=i),rules:[],label:e.$t("inputAreaOfBuilding")},null,8,["onChange","modelValue","label"])]),n("div",ne,[t(g,{outlined:"",dense:"",class:"q-mt-sm",type:"number",min:"0",onChange:e.onChangeFilter,modelValue:e.filter.rooms,"onUpdate:modelValue":l[3]||(l[3]=i=>e.filter.rooms=i),rules:[],label:e.$t("inputRooms")},null,8,["onChange","modelValue","label"])]),n("div",ie,[t(g,{outlined:"",dense:"",class:"q-mt-sm",type:"number",min:"0",onChange:e.onChangeFilter,modelValue:e.filter.price,"onUpdate:modelValue":l[4]||(l[4]=i=>e.filter.price=i),rules:[],label:e.$t("inputPrice")},null,8,["onChange","modelValue","label"])])]))])])])}var ve=O(Z,[["render",re]]);export{ve as F};
